<div class="comment">
  <span class="name">{{ item['4'] }}</span><span class="timeago">{{ timeago(item['2']) }}</span>
  <div class="content" ref:content></div>
  <button class="outlined" on:click="show_form()">Reply</button>
  {{#if item.children.length}}
  <dd>
    {{#each item.children as child, i}}
    <:Self item='{{ child }}' index="{{ i }}" />
    {{/each}}
  </dd>
  {{/if}}
</div>
<script>
import { POST_ID, context, timeago, append, extractMsg, toHTML, toPayload, toTree } from './util'
import * as rpc from './rpc'

export default {
    data: () => ({
        
    }),
    helpers: {
        timeago,
        append
    },
    oncreate() {
        this.refs.content.innerHTML = toHTML(this.get('item')['5'])
    },
    methods: {
        show_form() {
            let root = context.root
            if (!root.get('loading'))
                root.reply$$show_form(this, this.refs.content.nextElementSibling)
        }
    }
}
</script>