/*
 showdown 06-02-2017 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(f,t,A){if(A.get||A.set)throw new TypeError("ES3 does not support getters and setters.");f!=Array.prototype&&f!=Object.prototype&&(f[t]=A.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(f,t,A,h){if(t){A=$jscomp.global;f=f.split(".");for(h=0;h<f.length-1;h++){var B=f[h];B in A||(A[B]={});A=A[B]}f=f[f.length-1];h=A[f];t=t(h);t!=h&&null!=t&&$jscomp.defineProperty(A,f,{configurable:!0,writable:!0,value:t})}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(f){var t=0;return $jscomp.iteratorPrototype(function(){return t<f.length?{done:!1,value:f[t++]}:{done:!0}})};$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};
$jscomp.iteratorFromArray=function(f,t){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var A=0,h={next:function(){if(A<f.length){var B=A++;return{value:t(B,f[B]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};$jscomp.polyfill("Array.prototype.entries",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f,A){return[f,A]})}},"es6-impl","es3");
$jscomp.makeIterator=function(f){$jscomp.initSymbolIterator();var t=f[Symbol.iterator];return t?t.call(f):$jscomp.arrayIterator(f)};$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(f){function t(){this.batch_=null}if(f&&!$jscomp.FORCE_POLYFILL_PROMISE)return f;t.prototype.asyncExecute=function(u){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(u);return this};t.prototype.asyncExecuteBatch_=function(){var u=this;this.asyncExecuteFunction(function(){u.executeBatch_()})};var A=$jscomp.global.setTimeout;t.prototype.asyncExecuteFunction=function(u){A(u,0)};t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var u=
this.batch_;this.batch_=[];for(var f=0;f<u.length;++f){var h=u[f];delete u[f];try{h()}catch(ma){this.asyncThrow_(ma)}}}this.batch_=null};t.prototype.asyncThrow_=function(u){this.asyncExecuteFunction(function(){throw u;})};var h=function(u){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var f=this.createResolveAndReject_();try{u(f.resolve,f.reject)}catch(T){f.reject(T)}};h.prototype.createResolveAndReject_=function(){function f(f){return function(u){t||(t=!0,f.call(h,u))}}var h=this,
t=!1;return{resolve:f(this.resolveTo_),reject:f(this.reject_)}};h.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof h)this.settleSameAsPromise_(f);else{a:switch(typeof f){case "object":var u=null!=f;break a;case "function":u=!0;break a;default:u=!1}u?this.resolveToNonPromiseObj_(f):this.fulfill_(f)}};h.prototype.resolveToNonPromiseObj_=function(f){var u=void 0;try{u=f.then}catch(T){this.reject_(T);return}"function"==
typeof u?this.settleSameAsThenable_(u,f):this.fulfill_(f)};h.prototype.reject_=function(f){this.settle_(2,f)};h.prototype.fulfill_=function(f){this.settle_(1,f)};h.prototype.settle_=function(f,h){if(0!=this.state_)throw Error("Cannot settle("+f+", "+h|"): Promise already settled in state"+this.state_);this.state_=f;this.result_=h;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var f=this.onSettledCallbacks_,h=0;h<f.length;++h)f[h].call(),
f[h]=null;this.onSettledCallbacks_=null}};var B=new t;h.prototype.settleSameAsPromise_=function(f){var h=this.createResolveAndReject_();f.callWhenSettled_(h.resolve,h.reject)};h.prototype.settleSameAsThenable_=function(f,h){var u=this.createResolveAndReject_();try{f.call(h,u.resolve,u.reject)}catch(ma){u.reject(ma)}};h.prototype.then=function(f,t){function u(f,h){return"function"==typeof f?function(h){try{A(f(h))}catch(Aa){ea(Aa)}}:h}var A,ea,B=new h(function(f,h){A=f;ea=h});this.callWhenSettled_(u(f,
A),u(t,ea));return B};h.prototype.catch=function(f){return this.then(void 0,f)};h.prototype.callWhenSettled_=function(f,h){function u(){switch(t.state_){case 1:f(t.result_);break;case 2:h(t.result_);break;default:throw Error("Unexpected state: "+t.state_);}}var t=this;null==this.onSettledCallbacks_?B.asyncExecute(u):this.onSettledCallbacks_.push(function(){B.asyncExecute(u)})};h.resolve=function(f){return f instanceof h?f:new h(function(h,u){h(f)})};h.reject=function(f){return new h(function(h,u){u(f)})};
h.race=function(f){return new h(function(u,t){for(var A=$jscomp.makeIterator(f),B=A.next();!B.done;B=A.next())h.resolve(B.value).callWhenSettled_(u,t)})};h.all=function(f){var u=$jscomp.makeIterator(f),t=u.next();return t.done?h.resolve([]):new h(function(f,A){function B(h){return function(t){X[h]=t;T--;0==T&&f(X)}}var X=[],T=0;do X.push(void 0),T++,h.resolve(t.value).callWhenSettled_(B(X.length-1),A),t=u.next();while(!t.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(h.$jscomp$new$AsyncExecutor=function(){return new t});
return h},"es6-impl","es3");$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6-impl","es3");
(function(){function f(b,c){return c={exports:{}},b(c,c.exports),c.exports}function t(b){return v[b.charCodeAt(0)]||b}function A(b,c,k,f){return"number"!==typeof b?f:Math.max(c,Math.min(b,k))}function h(b){return b?"ws"+b.substring(4):"ws"+window.location.protocol.substring(4)+"//"+window.location.host}function B(b,c){var k=c.rpc_host,f=c.auth_host,e=c.comments_max_depth;c=c.comments_collapse_depth;k&&(b.rpc_host=k);f&&(b.auth_host=f);e&&(b.limit_depth=e);c&&(b.collapse_depth=c);return b}function u(b,
c,k){b=~~b;c=""+b+" "+c;1!==b&&(c+="s");k&&(c+=k);return c}function wb(b,c,k,f){var e="";f&&(e+=b);e+=c;1<b&&(e+=k||"s");return e}function T(){return Array.prototype.slice.call(arguments).join(" ").trim()}function ma(b){b=Math.floor(Date.now()/1E3)-Math.floor(b/1E3);return 0===b?"just moments ago":60>b?u(b,"second"," ago"):3600>b?u(b/60,"minute"," ago"):86400>b?u(b/3600,"hour"," ago"):u(b/86400,"day"," ago")}function ea(b,c){return b?c?"+"+c:"+":"-"}function Ja(b){return Array.isArray(b)?b[1]["1"]:
String(b)}function X(b,c){b=b&&b.length?',"2":"'+b[b.length-1]["1"]+'"':"";return c?'{"1":'+Ka+b+',"3":"'+c["1"]+'"}':'{"1":'+Ka+b+"}"}function db(b,c,k){var f=k?k.children:H.items;k=k?',"8":"'+k["1"]+'"':"";return"{"+(f.length?'"1":"'+f[f.length-1]["1"]+'",':"")+'"4":"'+b.replace(fb,t)+'","5":"'+c.replace(fb,t)+'","6":'+Ka+k+"}"}function eb(b){do b.total_child_count++,b=b.parent;while(b)}function Aa(b,c,k){b.collapsed=!k&&0<=gb&&b["7"]>=gb;b.parent=c;b.total_child_count=0;b.children=[];b.map={}}
function Wa(b,c,k){var f=c["1"],e=b.map[f];if(e)return e;Aa(c,b,k);c.parent=b;b.children.push(c);b.map[f]=c;eb(b);return e}function La(b,c,k,f,e){for(var y=f?f.map:k.root_map,m=f?1+f["7"]:0,z=c.length?c[c.length-1]:null,g=z?z["7"]:m,l=0,p,a,r,d=0,J=b.length;d<J;d++)if(p=b[d],a=p["7"],m===a)r=p["1"],g=a,(z=y[r])||(z=p,l++,Aa(p,f,e),c.push(p),y[r]=p,f&&eb(f));else if(a===g)(z=Wa(z.parent,p,e))||(z=p,l++);else if(a>g)g=a,(z=Wa(z,p,e))||(z=p,l++);else{do z=z.parent;while(a<z["7"]);g=a;(z=Wa(z.parent,
p,e))||(z=p,l++)}k.total_count+=l;return c}function Na(b){var c=b.status;if(200>c||299<c)throw c;return b.text()}function Xa(b){var c=b.charAt(0),k=b.length,k="\n"===b.charAt(k-1)?k-2:k;if("+"===c){b=JSON.parse(b.substring(1,k));if(b[0])throw b;return 2===b.length?b[1]:b}if("-"!==c)throw Error("Malformed response.");if("["!==b.charAt(1))throw Error(b.substring(1,k));throw JSON.parse(b.substring(1,k));}function hb(b,c,k,f){var e=fa.auth$$;return k||e?new ib(b,c,f||Na,e):fetch(b,c).then(f||Na).then(Xa)}
function q(b,c){c.appendChild(b)}function K(b){b.parentNode.removeChild(b)}function Oa(b,c,k){for(;k<b.length;k+=1)b[k].destroy(c)}function n(b){return document.createElement(b)}function m(b){return document.createTextNode(b)}function G(b,c,k){b.addEventListener(c,k,!1)}function L(b,c,k){b.removeEventListener(c,k,!1)}function ca(b){for(var c=arguments,k=1;k<arguments.length;k+=1){var f=c[k],e;for(e in f)b[e]=f[e]}return b}function Pa(b,c,k,f){for(var e in c)if(e in k){var y=k[e],m=f[e];if(y!==m||
y&&"object"===typeof y||"function"===typeof y){var z=c[e];if(z)for(var g=0;g<z.length;g+=1){var l=z[g];l.__calling||(l.__calling=!0,l.call(b,y,m),l.__calling=!1)}}}}function xb(b,c){function k(a){c.refresh()}function f(a){a=c.get();c.toggle(a.item)}function e(a){c.show_form()}var Ma,h,z,g,l,p=n("div");p.className=Ma=b.item.collapsed?"comment collapsed":"comment";var a=n("span");p.appendChild(a);a.className="name";q(m("\n  "),p);a=n("span");p.appendChild(a);a.className="btns";var r=n("button");a.appendChild(r);
r.className="stripped timeago";r.title="refresh";G(r,"click",k);c.refs.refresh=r;var d=m(h=P.helpers.timeago(b.item["2"]));r.appendChild(d);q(m("\n    "),a);var J=n("button");a.appendChild(J);J.className="stripped";J.title=z=P.helpers.title(b.item.children.length,b.item.total_child_count);G(J,"click",f);q(m("[ "),J);var E=m(g=P.helpers.plus_minus(b.item.collapsed,b.item.total_child_count));J.appendChild(E);q(m(" ]"),J);q(m("\n  "),p);var D=n("div");p.appendChild(D);D.className="content";c.refs.content=
D;q(m("\n  "),p);var x=n("button");p.appendChild(x);x.className=l=P.helpers.reply_btn_class(b.item["7"]);G(x,"click",e);q(m("Reply"),x);q(m("\n  "),p);var C=b.item.children.length&&jb(b,c);C&&C.mount(p,null);return{mount:function(a,d){a.insertBefore(p,d)},update:function(a,b){Ma!==(Ma=b.item.collapsed?"comment collapsed":"comment")&&(p.className=Ma);h!==(h=P.helpers.timeago(b.item["2"]))&&(d.data=h);z!==(z=P.helpers.title(b.item.children.length,b.item.total_child_count))&&(J.title=z);g!==(g=P.helpers.plus_minus(b.item.collapsed,
b.item.total_child_count))&&(E.data=g);l!==(l=P.helpers.reply_btn_class(b.item["7"]))&&(x.className=l);b.item.children.length?C?C.update(a,b):(C=jb(b,c),C.mount(p,null)):C&&(C.destroy(!0),C=null)},destroy:function(a){L(r,"click",k);c.refs.refresh===r&&(c.refs.refresh=null);L(J,"click",f);c.refs.content===D&&(c.refs.content=null);L(x,"click",e);C&&C.destroy(!1);a&&K(p)}}}function kb(b,c,f,y,e){var k=new aa({target:null,_root:e._root||e,data:{item:f}});return{mount:function(b,e){k._fragment.mount(b,
e)},update:function(b,e,c,l,f){e={};"item"in b&&(e.item=l);Object.keys(e).length&&k.set(e)},destroy:function(b){k.destroy(b)}}}function jb(b,c){var f=n("button");f.className="stripped";f.disabled=!0;q(m("\u00a0"),f);var y=m("\n  "),e=n("dd");c.refs.dd=e;for(var h=b.item.children,O=[],z=0;z<h.length;z+=1)O[z]=kb(b,h,h[z],z,c),O[z].mount(e,null);return{mount:function(b,c){b.insertBefore(f,c);b.insertBefore(y,c);b.insertBefore(e,c)},update:function(b,f){var g=f.item.children;if("item"in b){for(var a=
0;a<g.length;a+=1)O[a]?O[a].update(b,f,g,g[a],a):(O[a]=kb(f,g,g[a],a,c),O[a].mount(e,null));Oa(O,!0,g.length);O.length=g.length}},destroy:function(b){c.refs.dd===e&&(c.refs.dd=null);Oa(O,!1,0);b&&(K(f),K(y),K(e))}}}function aa(b){b=b||{};this.refs={};this._state=ca(P.data(),b.data);this._observers={pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._root=b._root;this._yield=b._yield;this._torndown=!1;this._renderHooks=[];this._fragment=xb(this._state,this);b.target&&
this._fragment.mount(b.target,null);this._flush();b._root?b._root._renderHooks.push({fn:P.oncreate,context:this}):P.oncreate.call(this)}function yb(b,c){function f(a){c.set({errmsg:""})}function y(a){c.preview("comment_preview","comment_content")}function e(a){c.comment$$()}function h(a){c.set({comment_errmsg:""})}function O(a){c.reply$$hide_form()}function z(a){c.preview("reply_preview","reply_content")}function g(a){c.set({reply_errmsg:""})}function l(a){c.reply$$()}function p(a){a=c.get();c.collapse_all(a.collapsed,
a.items)}function a(a){c.load(!1)}var r,d,J,E,D,x,C,U,M,I,Qa,N,ba,Ba,t,u,v,A,B,H=n("div");H.className=r=b.errmsg?"msg error":"hide";var P=n("b");H.appendChild(P);G(P,"click",f);q(m("x"),P);q(m("\n  "),H);var w=n("span");H.appendChild(w);var W=m(d=b.errmsg);w.appendChild(W);var Y=m("\n"),ya=n("div");ya.className="ta";w=n("div");ya.appendChild(w);w.className="v-btns bottom";w.title="preview";var Ea=n("button");w.appendChild(Ea);Ea.tabIndex="-1";Ea.type="button";G(Ea,"click",y);q(m("p"),Ea);q(m("\n  "),
ya);var T=n("textarea");ya.appendChild(T);T.className=J=b.comment_content_err?"error":"";c.refs.comment_content=T;q(m("\n  "),ya);var Ha=n("div");ya.appendChild(Ha);Ha.className=E=b.comment_preview?"preview":"hide";c.refs.comment_preview=Ha;var X=m("\n"),na=n("div");na.className="inline";var Q=b.with_auth?lb:mb,da=Q&&Q(b,c);da&&da.mount(na,null);var ca=m("\n  ");na.appendChild(ca);var oa=n("button");na.appendChild(oa);oa.type="button";oa.className="primary";G(oa,"click",e);c.refs.comment_btn=oa;q(m("Post comment"),
oa);var ea=m("\n"),pa=n("div");pa.className=D=b.comment_errmsg?"msg error":"hide";var aa=n("b");pa.appendChild(aa);G(aa,"click",h);q(m("x"),aa);q(m("\n  "),pa);w=n("span");pa.appendChild(w);var ka=m(x=b.comment_errmsg);w.appendChild(ka);var ia=m("\n"),Ra=n("div");Ra.style.cssText="display:none";var V=n("div");Ra.appendChild(V);V.className="reply-form ta";c.refs.reply_form=V;w=n("div");V.appendChild(w);w.className="v-btns top";w.title="close";var Ia=n("button");w.appendChild(Ia);Ia.type="button";G(Ia,
"click",O);q(m("x"),Ia);q(m("\n    "),V);w=n("div");V.appendChild(w);w.className="v-btns bottom";w.title="preview";var qa=n("button");w.appendChild(qa);qa.tabIndex="-1";qa.type="button";G(qa,"click",z);q(m("p"),qa);q(m("\n    "),V);var Ca=n("textarea");V.appendChild(Ca);Ca.className=C=b.reply_content_err?"error":"";c.refs.reply_content=Ca;q(m("\n    "),V);var Da=n("div");V.appendChild(Da);Da.className=U=b.reply_preview?"preview":"hide";c.refs.reply_preview=Da;q(m("\n    "),V);var za=n("div");V.appendChild(za);
za.className=M=b.reply_errmsg?"msg error":"hide";var Fa=n("b");za.appendChild(Fa);G(Fa,"click",g);q(m("x"),Fa);q(m("\n      "),za);w=n("span");za.appendChild(w);var ma=m(I=b.reply_errmsg);w.appendChild(ma);q(m("\n    "),V);var ra=n("div");V.appendChild(ra);ra.className="inline";var sa=b.with_auth?nb:ob,R=sa&&sa(b,c);R&&R.mount(ra,null);var pb=m("\n      ");ra.appendChild(pb);var ta=n("button");ra.appendChild(ta);ta.type="button";ta.className="primary";G(ta,"click",l);c.refs.reply_btn=ta;q(m("Reply"),
ta);var Ya=m("\n"),S=n("div");S.className="hide";c.refs.controls=S;var Sa=n("span");S.appendChild(Sa);Sa.className=Qa=b.total_count?"count":"hide";var qb=m(N=b.total_count);Sa.appendChild(qb);q(m("\n  "),S);w=n("span");S.appendChild(w);var rb=m(ba=b.total_count?ga.helpers.pluralize(b.total_count,"comment"):"No comments yet");w.appendChild(rb);q(m("\n  "),S);var ua=n("button");S.appendChild(ua);ua.type="button";ua.className=Ba=b.items.length?"stripped":"hide";G(ua,"click",p);q(m("[ "),ua);var fa=m(t=
ga.helpers.plus_minus(b.collapsed,b.items.length));ua.appendChild(fa);q(m(" ]"),ua);q(m("\n  "),S);var va=n("button");S.appendChild(va);va.type="button";va.className=u=b.total_count&&b.skip_refresh?"hide":"outlined";va.disabled=v=b.loading;G(va,"click",a);q(m("refresh"),va);q(m("\n  "),S);var ja=!b.skip_load_more&&sb(b,c);ja&&ja.mount(S,null);var ha=m("\n  ");S.appendChild(ha);w=n("div");S.appendChild(w);w.className="legend btns";var Z=n("span");w.appendChild(Z);Z.className=A=b.connected?"symbol":
"hide";Z.title="connected";q(m("*"),Z);q(m("\n    "),w);var F=n("button");w.appendChild(F);F.className="stripped";F.disabled=!0;q(m("Press"),F);q(m("\n    "),w);F=n("button");w.appendChild(F);F.className="outlined";F.disabled=!0;q(m("ctrl"),F);q(m("\n    "),w);F=n("button");w.appendChild(F);F.className="stripped";F.disabled=!0;q(m("+"),F);q(m("\n    "),w);F=n("button");w.appendChild(F);F.className="outlined";F.disabled=!0;q(m("space"),F);q(m("\n    "),w);F=n("button");w.appendChild(F);F.className=
"stripped";F.disabled=!0;q(m("to toggle markdown preview"),F);q(m("\n  "),S);w=n("div");S.appendChild(w);w.style.cssText="clear:both";var la=m("\n"),Ga=n("dl");Ga.className=B=b.items.length?"":"hide";for(var w=b.items,wa=[],F=0;F<w.length;F+=1)wa[F]=tb(b,w,w[F],F,c),wa[F].mount(Ga,null);return{mount:function(a,d){a.insertBefore(H,d);a.insertBefore(Y,d);a.insertBefore(ya,d);a.insertBefore(X,d);a.insertBefore(na,d);a.insertBefore(ea,d);a.insertBefore(pa,d);a.insertBefore(ia,d);a.insertBefore(Ra,d);
a.insertBefore(Ya,d);a.insertBefore(S,d);a.insertBefore(la,d);a.insertBefore(Ga,d)},update:function(a,b){r!==(r=b.errmsg?"msg error":"hide")&&(H.className=r);d!==(d=b.errmsg)&&(W.data=d);J!==(J=b.comment_content_err?"error":"")&&(T.className=J);E!==(E=b.comment_preview?"preview":"hide")&&(Ha.className=E);Q===(Q=b.with_auth?lb:mb)&&da?da.update(a,b):(da&&da.destroy(!0),(da=Q&&Q(b,c))&&da.mount(na,ca));D!==(D=b.comment_errmsg?"msg error":"hide")&&(pa.className=D);x!==(x=b.comment_errmsg)&&(ka.data=
x);C!==(C=b.reply_content_err?"error":"")&&(Ca.className=C);U!==(U=b.reply_preview?"preview":"hide")&&(Da.className=U);M!==(M=b.reply_errmsg?"msg error":"hide")&&(za.className=M);I!==(I=b.reply_errmsg)&&(ma.data=I);sa===(sa=b.with_auth?nb:ob)&&R?R.update(a,b):(R&&R.destroy(!0),(R=sa&&sa(b,c))&&R.mount(ra,pb));Qa!==(Qa=b.total_count?"count":"hide")&&(Sa.className=Qa);N!==(N=b.total_count)&&(qb.data=N);ba!==(ba=b.total_count?ga.helpers.pluralize(b.total_count,"comment"):"No comments yet")&&(rb.data=
ba);Ba!==(Ba=b.items.length?"stripped":"hide")&&(ua.className=Ba);t!==(t=ga.helpers.plus_minus(b.collapsed,b.items.length))&&(fa.data=t);u!==(u=b.total_count&&b.skip_refresh?"hide":"outlined")&&(va.className=u);v!==(v=b.loading)&&(va.disabled=v);b.skip_load_more?ja&&(ja.destroy(!0),ja=null):ja?ja.update(a,b):(ja=sb(b,c),ja.mount(S,ha));A!==(A=b.connected?"symbol":"hide")&&(Z.className=A);B!==(B=b.items.length?"":"hide")&&(Ga.className=B);var e=b.items;if("items"in a){for(var g=0;g<e.length;g+=1)wa[g]?
wa[g].update(a,b,e,e[g],g):(wa[g]=tb(b,e,e[g],g,c),wa[g].mount(Ga,null));Oa(wa,!0,e.length);wa.length=e.length}},destroy:function(b){L(P,"click",f);L(Ea,"click",y);c.refs.comment_content===T&&(c.refs.comment_content=null);c.refs.comment_preview===Ha&&(c.refs.comment_preview=null);da&&da.destroy(!1);L(oa,"click",e);c.refs.comment_btn===oa&&(c.refs.comment_btn=null);L(aa,"click",h);c.refs.reply_form===V&&(c.refs.reply_form=null);L(Ia,"click",O);L(qa,"click",z);c.refs.reply_content===Ca&&(c.refs.reply_content=
null);c.refs.reply_preview===Da&&(c.refs.reply_preview=null);L(Fa,"click",g);R&&R.destroy(!1);L(ta,"click",l);c.refs.reply_btn===ta&&(c.refs.reply_btn=null);c.refs.controls===S&&(c.refs.controls=null);L(ua,"click",p);L(va,"click",a);ja&&ja.destroy(!1);Oa(wa,!1,0);b&&(K(H),K(Y),K(ya),K(X),K(na),K(ea),K(pa),K(ia),K(Ra),K(Ya),K(S),K(la),K(Ga))}}}function lb(b,c){function f(a){c.pop("google")}function y(a){c.pop("github")}function e(a){c.pop("gitlab")}function h(a){c.logout()}var O,z,g,l,p,a,r,d=n("div");
d.className=O=b.comment_name_err?"ib error":"ib";var J=n("span");d.appendChild(J);var E=m(z=b.user_nick||"via ");J.appendChild(E);q(m("\n    "),d);var D=n("div");d.appendChild(D);D.className=g=b.user_nick?"hide":"ib";var x=n("button");D.appendChild(x);x.className=l=b.auth_flags&1?"stripped":"hide";G(x,"click",f);q(m("google"),x);q(m("\n      "),D);var C=n("button");D.appendChild(C);C.className=p=b.auth_flags&2?"stripped":"hide";G(C,"click",y);q(m("github"),C);q(m("\n      "),D);var U=n("button");
D.appendChild(U);U.className=a=b.auth_flags&4?"stripped":"hide";G(U,"click",e);q(m("gitlab"),U);q(m("\n    "),d);var M=n("button");d.appendChild(M);M.tabIndex="-1";M.className=r=b.user_nick?"stripped":"hide";G(M,"click",h);q(m("x"),M);q(m("\n    "),d);var I=n("input");d.appendChild(I);I.type="hidden";c.refs.comment_name=I;return{mount:function(a,b){a.insertBefore(d,b)},update:function(b,e){O!==(O=e.comment_name_err?"ib error":"ib")&&(d.className=O);z!==(z=e.user_nick||"via ")&&(E.data=z);g!==(g=e.user_nick?
"hide":"ib")&&(D.className=g);l!==(l=e.auth_flags&1?"stripped":"hide")&&(x.className=l);p!==(p=e.auth_flags&2?"stripped":"hide")&&(C.className=p);a!==(a=e.auth_flags&4?"stripped":"hide")&&(U.className=a);r!==(r=e.user_nick?"stripped":"hide")&&(M.className=r)},destroy:function(a){L(x,"click",f);L(C,"click",y);L(U,"click",e);L(M,"click",h);c.refs.comment_name===I&&(c.refs.comment_name=null);a&&K(d)}}}function mb(b,c){var f,y=n("input");y.type="text";y.className=f=b.comment_name_err?"error":"";y.placeholder=
"Name";c.refs.comment_name=y;return{mount:function(b,c){b.insertBefore(y,c)},update:function(b,c){f!==(f=c.comment_name_err?"error":"")&&(y.className=f)},destroy:function(b){c.refs.comment_name===y&&(c.refs.comment_name=null);b&&K(y)}}}function nb(b,c){function f(a){c.pop("google")}function y(a){c.pop("github")}function e(a){c.pop("gitlab")}function h(a){c.logout()}var O,z,g,l,p,a,r,d=n("div");d.className=O=b.reply_name_err?"ib error":"ib";var J=n("span");d.appendChild(J);var E=m(z=b.user_nick||"via");
J.appendChild(E);q(m("\n        "),d);var D=n("div");d.appendChild(D);D.className=g=b.user_nick?"hide":"ib";var x=n("button");D.appendChild(x);x.className=l=b.auth_flags&1?"stripped":"hide";G(x,"click",f);q(m("google"),x);q(m("\n          "),D);var C=n("button");D.appendChild(C);C.className=p=b.auth_flags&2?"stripped":"hide";G(C,"click",y);q(m("github"),C);q(m("\n          "),D);var U=n("button");D.appendChild(U);U.className=a=b.auth_flags&4?"stripped":"hide";G(U,"click",e);q(m("gitlab"),U);q(m("\n        "),
d);var M=n("button");d.appendChild(M);M.tabIndex="-1";M.className=r=b.user_nick?"stripped":"hide";G(M,"click",h);q(m("x"),M);q(m("\n        "),d);var I=n("input");d.appendChild(I);I.type="hidden";c.refs.reply_name=I;return{mount:function(a,b){a.insertBefore(d,b)},update:function(b,e){O!==(O=e.reply_name_err?"ib error":"ib")&&(d.className=O);z!==(z=e.user_nick||"via")&&(E.data=z);g!==(g=e.user_nick?"hide":"ib")&&(D.className=g);l!==(l=e.auth_flags&1?"stripped":"hide")&&(x.className=l);p!==(p=e.auth_flags&
2?"stripped":"hide")&&(C.className=p);a!==(a=e.auth_flags&4?"stripped":"hide")&&(U.className=a);r!==(r=e.user_nick?"stripped":"hide")&&(M.className=r)},destroy:function(a){L(x,"click",f);L(C,"click",y);L(U,"click",e);L(M,"click",h);c.refs.reply_name===I&&(c.refs.reply_name=null);a&&K(d)}}}function ob(b,c){var f,y=n("input");y.type="text";y.className=f=b.reply_name_err?"error":"";y.placeholder="Name";c.refs.reply_name=y;return{mount:function(b,c){b.insertBefore(y,c)},update:function(b,c){f!==(f=c.reply_name_err?
"error":"")&&(y.className=f)},destroy:function(b){c.refs.reply_name===y&&(c.refs.reply_name=null);b&&K(y)}}}function sb(b,c){function f(b){c.load(!0)}var y,e,h=n("button");h.type="button";h.className=y=b.total_count?"outlined":"hide";h.disabled=e=b.loading;G(h,"click",f);q(m("load more"),h);return{mount:function(b,e){b.insertBefore(h,e)},update:function(b,c){y!==(y=c.total_count?"outlined":"hide")&&(h.className=y);e!==(e=c.loading)&&(h.disabled=e)},destroy:function(b){L(h,"click",f);b&&K(h)}}}function tb(b,
c,f,h,e){var k=new aa({target:null,_root:e._root||e,data:{item:f}});return{mount:function(b,e){k._fragment.mount(b,e)},update:function(b,e,c,f,p){e={};"items"in b&&(e.item=f);Object.keys(e).length&&k.set(e)},destroy:function(b){k.destroy(b)}}}function ha(b){b=b||{};this.refs={};this._state=ca(ga.data(),b.data);this._observers={pre:Object.create(null),post:Object.create(null)};this._handlers=Object.create(null);this._root=b._root;this._yield=b._yield;this._torndown=!1;this._renderHooks=[];this._fragment=
yb(this._state,this);b.target&&this._fragment.mount(b.target,null);this._flush();b._root?b._root._renderHooks.push({fn:ga.oncreate,context:this}):ga.oncreate.call(this)}var zb="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Y=f(function(b){(function(){function c(a){var b={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",
type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Specify a prefix to generated header ids",type:"string"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,
describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,
describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,
description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as \x3cbr\x3e (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",
description:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,description:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"}};if(!1===a)return JSON.parse(JSON.stringify(b));a={};for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d].defaultValue);return a}function f(a,b){b=b?"Error in "+b+" extension-\x3e":"Error in unnamed extension";
var d={valid:!0,error:""};e.helper.isArray(a)||(a=[a]);for(var r=0;r<a.length;++r){var c=b+" sub-extension "+r+": ",f=a[r];if("object"!==typeof f){d.valid=!1;d.error=c+"must be an object, but "+typeof f+" given";break}if(!e.helper.isString(f.type)){d.valid=!1;d.error=c+'property "type" must be a string, but '+typeof f.type+" given";break}var g=f.type=f.type.toLowerCase();"language"===g&&(g=f.type="lang");"html"===g&&(g=f.type="output");if("lang"!==g&&"output"!==g&&"listener"!==g){d.valid=!1;d.error=
c+"type "+g+' is not recognized. Valid values: "lang/language", "output/html" or "listener"';break}if("listener"===g){if(e.helper.isUndefined(f.listeners)){d.valid=!1;d.error=c+'. Extensions of type "listener" must have a property called "listeners"';break}}else if(e.helper.isUndefined(f.filter)&&e.helper.isUndefined(f.regex)){d.valid=!1;d.error=c+g+' extensions must define either a "regex" property or a "filter" method';break}if(f.listeners){if("object"!==typeof f.listeners){d.valid=!1;d.error=c+
'"listeners" property must be an object but '+typeof f.listeners+" given";break}for(var l in f.listeners)if(f.listeners.hasOwnProperty(l)&&"function"!==typeof f.listeners[l])return d.valid=!1,d.error=c+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+l+" must be a function but "+typeof f.listeners[l]+" given",d}if(f.filter){if("function"!==typeof f.filter){d.valid=!1;d.error=c+'"filter" must be a function, but '+typeof f.filter+" given";break}}else if(f.regex){e.helper.isString(f.regex)&&
(f.regex=new RegExp(f.regex,"g"));if(!(f.regex instanceof RegExp)){d.valid=!1;d.error=c+'"regex" property must either be a string or a RegExp object, but '+typeof f.regex+" given";break}if(e.helper.isUndefined(f.replace)){d.valid=!1;d.error=c+'"regex" extensions must implement a replace string or function';break}}}return d}function h(a,b){return"\u00a8E"+b.charCodeAt(0)+"E"}var e={},m={},n={},q=c(!0),g="vanilla",l={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,
literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,
simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:c(!0),allOn:function(){var a=c(!0),b={},d;for(d in a)a.hasOwnProperty(d)&&(b[d]=!0);return b}()};e.helper={};e.extensions={};e.setOption=function(a,b){q[a]=b;return this};e.getOption=function(a){return q[a]};e.getOptions=function(){return q};e.resetOptions=function(){q=c(!0)};e.setFlavor=function(a){if(!l.hasOwnProperty(a))throw Error(a+" flavor was not found");var b=l[a];g=a;for(var d in b)b.hasOwnProperty(d)&&
(q[d]=b[d])};e.getFlavor=function(){return g};e.getFlavorOptions=function(a){if(l.hasOwnProperty(a))return l[a]};e.getDefaultOptions=function(a){return c(a)};e.subParser=function(a,b){if(e.helper.isString(a))if("undefined"!==typeof b)m[a]=b;else{if(m.hasOwnProperty(a))return m[a];throw Error("SubParser named "+a+" not registered!");}};e.extension=function(a,b){if(!e.helper.isString(a))throw Error("Extension 'name' must be a string");a=e.helper.stdExtName(a);if(e.helper.isUndefined(b)){if(!n.hasOwnProperty(a))throw Error("Extension named "+
a+" is not registered!");return n[a]}"function"===typeof b&&(b=b());e.helper.isArray(b)||(b=[b]);var d=f(b,a);if(d.valid)n[a]=b;else throw Error(d.error);};e.getAllExtensions=function(){return n};e.removeExtension=function(a){delete n[a]};e.resetExtensions=function(){n={}};e.validateExtension=function(a){a=f(a,null);return a.valid?!0:(console.warn(a.error),!1)};e.hasOwnProperty("helper")||(e.helper={});e.helper.isString=function(a){return"string"===typeof a||a instanceof String};e.helper.isFunction=
function(a){var b={};return a&&"[object Function]"===b.toString.call(a)};e.helper.isArray=function(a){return a.constructor===Array};e.helper.isUndefined=function(a){return"undefined"===typeof a};e.helper.forEach=function(a,b){if(e.helper.isUndefined(a))throw Error("obj param is required");if(e.helper.isUndefined(b))throw Error("callback param is required");if(!e.helper.isFunction(b))throw Error("callback param must be a function/closure");if("function"===typeof a.forEach)a.forEach(b);else if(e.helper.isArray(a))for(var d=
0;d<a.length;d++)b(a[d],d,a);else if("object"===typeof a)for(d in a)a.hasOwnProperty(d)&&b(a[d],d,a);else throw Error("obj does not seem to be an array or an iterable object");};e.helper.stdExtName=function(a){return a.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};e.helper.escapeCharactersCallback=h;e.helper.escapeCharacters=function(a,b,d){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";d&&(b="\\\\"+b);return a=a.replace(new RegExp(b,"g"),h)};var p=function(a,b,d,e){var c=e||"";e=-1<
c.indexOf("g");d=new RegExp(b+"|"+d,"g"+c.replace(/g/g,""));b=new RegExp(b,c.replace(/g/g,""));var c=[],r,f;do for(r=0;f=d.exec(a);)if(b.test(f[0])){if(!r++){var g=d.lastIndex;var J=g-f[0].length}}else if(r&&!--r){var M=f.index+f[0].length;c.push({left:{start:J,end:g},match:{start:g,end:f.index},right:{start:f.index,end:M},wholeMatch:{start:J,end:M}});if(!e)return c}while(r&&(d.lastIndex=g));return c};e.helper.matchRecursiveRegExp=function(a,b,d,e){b=p(a,b,d,e);d=[];for(e=0;e<b.length;++e)d.push([a.slice(b[e].wholeMatch.start,
b[e].wholeMatch.end),a.slice(b[e].match.start,b[e].match.end),a.slice(b[e].left.start,b[e].left.end),a.slice(b[e].right.start,b[e].right.end)]);return d};e.helper.replaceRecursiveRegExp=function(a,b,d,c,f){if(!e.helper.isFunction(b)){var r=b;b=function(){return r}}d=p(a,d,c,f);f=a;c=d.length;if(0<c){f=[];0!==d[0].wholeMatch.start&&f.push(a.slice(0,d[0].wholeMatch.start));for(var g=0;g<c;++g)f.push(b(a.slice(d[g].wholeMatch.start,d[g].wholeMatch.end),a.slice(d[g].match.start,d[g].match.end),a.slice(d[g].left.start,
d[g].left.end),a.slice(d[g].right.start,d[g].right.end))),g<c-1&&f.push(a.slice(d[g].wholeMatch.end,d[g+1].wholeMatch.start));d[c-1].wholeMatch.end<a.length&&f.push(a.slice(d[c-1].wholeMatch.end));f=f.join("")}return f};e.helper.encodeEmailAddress=function(a){var b=[function(a){return"\x26#"+a.charCodeAt(0)+";"},function(a){return"\x26#x"+a.charCodeAt(0).toString(16)+";"},function(a){return a}];return a=a.replace(/./g,function(a){if("@"===a)a=b[Math.floor(2*Math.random())](a);else{var d=Math.random();
a=.9<d?b[2](a):.45<d?b[1](a):b[0](a)}return a})};"undefined"===typeof console&&(console={warn:function(a){alert(a)},log:function(a){alert(a)},error:function(a){throw a;}});e.helper.regexes={asteriskAndDash:/([*_])/g};e.Converter=function(a){function b(a,b){b=b||null;if(e.helper.isString(a)){b=a=e.helper.stdExtName(a);if(e.extensions[a]){console.warn("DEPRECATION WARNING: "+a+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!");
var c=e.extensions[a];"function"===typeof c&&(c=c(new e.Converter));e.helper.isArray(c)||(c=[c]);a=f(c,a);if(!a.valid)throw Error(a.error);for(a=0;a<c.length;++a)switch(c[a].type){case "lang":D.push(c[a]);break;case "output":x.push(c[a]);break;default:throw Error("Extension loader error: Type unrecognized!!!");}return}if(e.helper.isUndefined(n[a]))throw Error('Extension "'+a+'" could not be loaded. It was either not found or is not a valid extension.');a=n[a]}"function"===typeof a&&(a=a());e.helper.isArray(a)||
(a=[a]);b=f(a,b);if(!b.valid)throw Error(b.error);for(b=0;b<a.length;++b){switch(a[b].type){case "lang":D.push(a[b]);break;case "output":x.push(a[b])}if(a[b].hasOwnProperty("listeners"))for(c in a[b].listeners)a[b].listeners.hasOwnProperty(c)&&d(c,a[b].listeners[c])}}function d(a,b){if(!e.helper.isString(a))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof a+" given");if("function"!==typeof b)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+
typeof b+" given");C.hasOwnProperty(a)||(C[a]=[]);C[a].push(b)}function c(a){var b=a.match(/^\s*/)[0].length;return a.replace(new RegExp("^\\s{0,"+b+"}","gm"),"")}var E={},D=[],x=[],C={},k=g;(function(){a=a||{};for(var d in q)q.hasOwnProperty(d)&&(E[d]=q[d]);if("object"===typeof a)for(var c in a)a.hasOwnProperty(c)&&(E[c]=a[c]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof a+" was passed instead.");E.extensions&&e.helper.forEach(E.extensions,b)})();this._dispatch=
function(a,b,d,e){if(C.hasOwnProperty(a))for(var c=0;c<C[a].length;++c){var r=C[a][c](a,b,this,d,e);r&&"undefined"!==typeof r&&(b=r)}return b};this.listen=function(a,b){d(a,b);return this};this.makeHtml=function(a){if(!a)return a;var b={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:D,outputModifiers:x,converter:this,ghCodeBlocks:[]};a=a.replace(/\u00a8/g,"\u00a8T");a=a.replace(/\$/g,"\u00a8D");a=a.replace(/\r\n/g,"\n");
a=a.replace(/\r/g,"\n");a=a.replace(/\u00A0/g," ");E.smartIndentationFix&&(a=c(a));a="\n\n"+a+"\n\n";a=e.subParser("detab")(a,E,b);a=a.replace(/^[ \t]+$/mg,"");e.helper.forEach(D,function(d){a=e.subParser("runExtension")(d,a,E,b)});a=e.subParser("hashPreCodeTags")(a,E,b);a=e.subParser("githubCodeBlocks")(a,E,b);a=e.subParser("hashHTMLBlocks")(a,E,b);a=e.subParser("hashCodeTags")(a,E,b);a=e.subParser("stripLinkDefinitions")(a,E,b);a=e.subParser("blockGamut")(a,E,b);a=e.subParser("unhashHTMLSpans")(a,
E,b);a=e.subParser("unescapeSpecialChars")(a,E,b);a=a.replace(/\u00a8D/g,"$$");a=a.replace(/\u00a8T/g,"\u00a8");e.helper.forEach(x,function(d){a=e.subParser("runExtension")(d,a,E,b)});return a};this.setOption=function(a,b){E[a]=b};this.getOption=function(a){return E[a]};this.getOptions=function(){return E};this.addExtension=function(a,d){b(a,d||null)};this.useExtension=function(a){b(a)};this.setFlavor=function(a){if(!l.hasOwnProperty(a))throw Error(a+" flavor was not found");var b=l[a];k=a;for(var d in b)b.hasOwnProperty(d)&&
(E[d]=b[d])};this.getFlavor=function(){return k};this.removeExtension=function(a){e.helper.isArray(a)||(a=[a]);for(var b=0;b<a.length;++b){for(var d=a[b],c=0;c<D.length;++c)D[c]===d&&D[c].splice(c,1);for(;0<x.length;++c)x[0]===d&&x[0].splice(c,1)}};this.getAllExtensions=function(){return{language:D,output:x}}};e.subParser("anchors",function(a,b,d){a=d.converter._dispatch("anchors.before",a,b,d);var c=function(a,b,c,f,r,g,J,l){e.helper.isUndefined(l)&&(l="");a=b;b=f.toLowerCase();if(!r)if(b||(b=c.toLowerCase().replace(/ ?\n/g,
" ")),e.helper.isUndefined(d.gUrls[b]))if(-1<a.search(/\(\s*\)$/m))r="";else return a;else r=d.gUrls[b],e.helper.isUndefined(d.gTitles[b])||(l=d.gTitles[b]);r=r.replace(e.helper.regexes.asteriskAndDash,e.helper.escapeCharactersCallback);a='\x3ca href\x3d"'+r+'"';""!==l&&null!==l&&(l=l.replace(/"/g,"\x26quot;"),l=l.replace(e.helper.regexes.asteriskAndDash,e.helper.escapeCharactersCallback),a+=' title\x3d"'+l+'"');return a+("\x3e"+c+"\x3c/a\x3e")};a=a.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,
c);a=a.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,c);a=a.replace(/(\[([^\[\]]+)])()()()()()/g,c);b.ghMentions&&(a=a.replace(/(^|\s)(\\)?(@([a-z\d\-]+))(?=[.!?;,[\]()]|\s|$)/gmi,function(a,d,c,r,f){if("\\"===c)return d+r;if(!e.helper.isString(b.ghMentionsLink))throw Error("ghMentionsLink option must be a string");a=b.ghMentionsLink.replace(/\{u}/g,f);return d+'\x3ca href\x3d"'+a+'"\x3e'+r+"\x3c/a\x3e"}));return a=d.converter._dispatch("anchors.after",
a,b,d)});e.subParser("autoLinks",function(a,b,d){function c(a,d,e,c,f){a=d;e="";/^www\./i.test(d)&&(d=d.replace(/^www\./i,"http://www."));b.excludeTrailingPunctuationFromURLs&&f&&(e=f);return'\x3ca href\x3d"'+d+'"\x3e'+a+"\x3c/a\x3e"+e}function f(a,c,f){a="mailto:";c=c||"";f=e.subParser("unescapeSpecialChars")(f,b,d);b.encodeEmails?(a=e.helper.encodeEmailAddress(a+f),f=e.helper.encodeEmailAddress(f)):a+=f;return c+'\x3ca href\x3d"'+a+'"\x3e'+f+"\x3c/a\x3e"}a=d.converter._dispatch("autoLinks.before",
a,b,d);var r=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)()(?=\s|$)(?!["<>])/gi,g=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?()]?)(?=\s|$)(?!["<>])/gi,l=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi;a=a.replace(/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,c);a=a.replace(/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,f);b.simplifiedAutoLink&&(a=b.excludeTrailingPunctuationFromURLs?a.replace(g,c):
a.replace(r,c),a=a.replace(l,f));return a=d.converter._dispatch("autoLinks.after",a,b,d)});e.subParser("blockGamut",function(a,b,d){a=d.converter._dispatch("blockGamut.before",a,b,d);a=e.subParser("blockQuotes")(a,b,d);a=e.subParser("headers")(a,b,d);a=e.subParser("horizontalRule")(a,b,d);a=e.subParser("lists")(a,b,d);a=e.subParser("codeBlocks")(a,b,d);a=e.subParser("tables")(a,b,d);a=e.subParser("hashHTMLBlocks")(a,b,d);a=e.subParser("paragraphs")(a,b,d);return a=d.converter._dispatch("blockGamut.after",
a,b,d)});e.subParser("blockQuotes",function(a,b,d){a=d.converter._dispatch("blockQuotes.before",a,b,d);a=a.replace(/((^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,c){a=c.replace(/^[ \t]*>[ \t]?/gm,"\u00a80");a=a.replace(/\u00a80/g,"");a=a.replace(/^[ \t]+$/gm,"");a=e.subParser("githubCodeBlocks")(a,b,d);a=e.subParser("blockGamut")(a,b,d);a=a.replace(/(^|\n)/g,"$1  ");a=a.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){a=b.replace(/^  /mg,"\u00a80");return a=a.replace(/\u00a80/g,"")});return e.subParser("hashBlock")("\x3cblockquote\x3e\n"+
a+"\n\x3c/blockquote\x3e",b,d)});return a=d.converter._dispatch("blockQuotes.after",a,b,d)});e.subParser("codeBlocks",function(a,b,d){a=d.converter._dispatch("codeBlocks.before",a,b,d);a=(a+"\u00a80").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=\u00a80))/g,function(a,c,f){a=c;c="\n";a=e.subParser("outdent")(a,b,d);a=e.subParser("encodeCode")(a,b,d);a=e.subParser("detab")(a,b,d);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");b.omitExtraWLInCodeBlocks&&(c="");a="\x3cpre\x3e\x3ccode\x3e"+
a+c+"\x3c/code\x3e\x3c/pre\x3e";return e.subParser("hashBlock")(a,b,d)+f});a=a.replace(/\u00a80/,"");return a=d.converter._dispatch("codeBlocks.after",a,b,d)});e.subParser("codeSpans",function(a,b,d){a=d.converter._dispatch("codeSpans.before",a,b,d);"undefined"===typeof a&&(a="");a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,c,f,g){a=g.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=e.subParser("encodeCode")(a,b,d);return c+"\x3ccode\x3e"+a+"\x3c/code\x3e"});return a=d.converter._dispatch("codeSpans.after",
a,b,d)});e.subParser("detab",function(a,b,d){a=d.converter._dispatch("detab.before",a,b,d);a=a.replace(/\t(?=\t)/g,"    ");a=a.replace(/\t/g,"\u00a8A\u00a8B");a=a.replace(/\u00a8B(.+?)\u00a8A/g,function(a,b){a=b;b=4-a.length%4;for(var d=0;d<b;d++)a+=" ";return a});a=a.replace(/\u00a8A/g,"    ");a=a.replace(/\u00a8B/g,"");return a=d.converter._dispatch("detab.after",a,b,d)});e.subParser("encodeAmpsAndAngles",function(a,b,d){a=d.converter._dispatch("encodeAmpsAndAngles.before",a,b,d);a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,
"\x26amp;");a=a.replace(/<(?![a-z\/?$!])/gi,"\x26lt;");a=a.replace(/</g,"\x26lt;");a=a.replace(/>/g,"\x26gt;");return a=d.converter._dispatch("encodeAmpsAndAngles.after",a,b,d)});e.subParser("encodeBackslashEscapes",function(a,b,d){a=d.converter._dispatch("encodeBackslashEscapes.before",a,b,d);a=a.replace(/\\(\\)/g,e.helper.escapeCharactersCallback);a=a.replace(/\\([`*_{}\[\]()>#+.!~=-])/g,e.helper.escapeCharactersCallback);return a=d.converter._dispatch("encodeBackslashEscapes.after",a,b,d)});e.subParser("encodeCode",
function(a,b,d){a=d.converter._dispatch("encodeCode.before",a,b,d);a=a.replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/([*_{}\[\]\\=~-])/g,e.helper.escapeCharactersCallback);return a=d.converter._dispatch("encodeCode.after",a,b,d)});e.subParser("escapeSpecialCharsWithinTagAttributes",function(a,b,d){a=d.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",a,b,d);a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){return a.replace(/(.)<\/?code>(?=.)/g,
"$1`").replace(/([\\`*_~=])/g,e.helper.escapeCharactersCallback)});return a=d.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",a,b,d)});e.subParser("githubCodeBlocks",function(a,b,d){if(!b.ghCodeBlocks)return a;a=d.converter._dispatch("githubCodeBlocks.before",a,b,d);a=(a+"\u00a80").replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(a,c,f){var g=b.omitExtraWLInCodeBlocks?"":"\n";f=e.subParser("encodeCode")(f,b,d);f=e.subParser("detab")(f,b,d);f=f.replace(/^\n+/g,"");f=f.replace(/\n+$/g,
"");f="\x3cpre\x3e\x3ccode"+(c?' class\x3d"'+c+" language-"+c+'"':"")+"\x3e"+f+g+"\x3c/code\x3e\x3c/pre\x3e";f=e.subParser("hashBlock")(f,b,d);return"\n\n\u00a8G"+(d.ghCodeBlocks.push({text:a,codeblock:f})-1)+"G\n\n"});a=a.replace(/\u00a80/,"");return d.converter._dispatch("githubCodeBlocks.after",a,b,d)});e.subParser("hashBlock",function(a,b,d){a=d.converter._dispatch("hashBlock.before",a,b,d);a=a.replace(/(^\n+|\n+$)/g,"");a="\n\n\u00a8K"+(d.gHtmlBlocks.push(a)-1)+"K\n\n";return a=d.converter._dispatch("hashBlock.after",
a,b,d)});e.subParser("hashCodeTags",function(a,b,d){a=d.converter._dispatch("hashCodeTags.before",a,b,d);a=e.helper.replaceRecursiveRegExp(a,function(a,c,f,g){a=f+e.subParser("encodeCode")(c,b,d)+g;return"\u00a8C"+(d.gHtmlSpans.push(a)-1)+"C"},"\x3ccode\\b[^\x3e]*\x3e","\x3c/code\x3e","gim");return a=d.converter._dispatch("hashCodeTags.after",a,b,d)});e.subParser("hashElement",function(a,b,d){return function(a,b){a=b.replace(/\n\n/g,"\n");a=a.replace(/^\n/,"");a=a.replace(/\n+$/g,"");return a="\n\n\u00a8K"+
(d.gHtmlBlocks.push(a)-1)+"K\n\n"}});e.subParser("hashHTMLBlocks",function(a,b,d){a=d.converter._dispatch("hashHTMLBlocks.before",a,b,d);for(var c="pre div h1 h2 h3 h4 h5 h6 blockquote table dl ol ul script noscript form fieldset iframe math style section header footer nav article aside address audio canvas figure hgroup output video p".split(" "),f=function(a,b,c,e){-1!==c.search(/\bmarkdown\b/)&&(a=c+d.converter.makeHtml(b)+e);return"\n\n\u00a8K"+(d.gHtmlBlocks.push(a)-1)+"K\n\n"},g=0;g<c.length;++g)a=
e.helper.replaceRecursiveRegExp(a,f,"^ {0,3}\x3c"+c[g]+"\\b[^\x3e]*\x3e","\x3c/"+c[g]+"\x3e","gim");a=a.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(a,b,d));a=e.helper.replaceRecursiveRegExp(a,function(a){return"\n\n\u00a8K"+(d.gHtmlBlocks.push(a)-1)+"K\n\n"},"^ {0,3}\x3c!--","--\x3e","gm");a=a.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e.subParser("hashElement")(a,b,d));return a=d.converter._dispatch("hashHTMLBlocks.after",a,b,d)});
e.subParser("hashHTMLSpans",function(a,b,d){function c(a){return"\u00a8C"+(d.gHtmlSpans.push(a)-1)+"C"}a=d.converter._dispatch("hashHTMLSpans.before",a,b,d);a=a.replace(/<[^>]+?\/>/gi,function(a){return c(a)});a=a.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(a){return c(a)});a=a.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(a){return c(a)});a=a.replace(/<[^>]+?>/gi,function(a){return c(a)});return a=d.converter._dispatch("hashHTMLSpans.after",a,b,d)});e.subParser("unhashHTMLSpans",function(a,
b,d){a=d.converter._dispatch("unhashHTMLSpans.before",a,b,d);for(var c=0;c<d.gHtmlSpans.length;++c){for(var e=d.gHtmlSpans[c],f=0;/\u00a8C(\d+)C/.test(e);){var g=RegExp.$1,e=e.replace("\u00a8C"+g+"C",d.gHtmlSpans[g]);if(10===f)break;++f}a=a.replace("\u00a8C"+c+"C",e)}return a=d.converter._dispatch("unhashHTMLSpans.after",a,b,d)});e.subParser("hashPreCodeTags",function(a,b,d){a=d.converter._dispatch("hashPreCodeTags.before",a,b,d);a=e.helper.replaceRecursiveRegExp(a,function(a,c,f,g){c=f+e.subParser("encodeCode")(c,
b,d)+g;return"\n\n\u00a8G"+(d.ghCodeBlocks.push({text:a,codeblock:c})-1)+"G\n\n"},"^ {0,3}\x3cpre\\b[^\x3e]*\x3e\\s*\x3ccode\\b[^\x3e]*\x3e","^ {0,3}\x3c/code\x3e\\s*\x3c/pre\x3e","gim");return a=d.converter._dispatch("hashPreCodeTags.after",a,b,d)});e.subParser("headers",function(a,b,d){function c(a){a=e.helper.isString(b.prefixHeaderId)?b.prefixHeaderId+a:!0===b.prefixHeaderId?"section "+a:a;a=g?a.replace(/ /g,"-").replace(/&amp;/g,"").replace(/\u00a8T/g,"").replace(/\u00a8D/g,"").replace(/[&+$,\/:;=?@"#{}|^\u00a8~\[\]`\\*)(%.!'<>]/g,
"").toLowerCase():a.replace(/[^\w]/g,"").toLowerCase();d.hashLinkCounts[a]?a=a+"-"+d.hashLinkCounts[a]++:d.hashLinkCounts[a]=1;return a}a=d.converter._dispatch("headers.before",a,b,d);var f=isNaN(parseInt(b.headerLevelStart))?1:parseInt(b.headerLevelStart),g=b.ghCompatibleHeaderId,l=b.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;a=a.replace(b.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,g){a=e.subParser("spanGamut")(g,
b,d);g=b.noHeaderId?"":' id\x3d"'+c(g)+'"';g="\x3ch"+f+g+"\x3e"+a+"\x3c/h"+f+"\x3e";return e.subParser("hashBlock")(g,b,d)});a=a.replace(l,function(a,g){a=e.subParser("spanGamut")(g,b,d);g=b.noHeaderId?"":' id\x3d"'+c(g)+'"';var l=f+1;a="\x3ch"+l+g+"\x3e"+a+"\x3c/h"+l+"\x3e";return e.subParser("hashBlock")(a,b,d)});a=a.replace(b.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,function(a,g,l){a=e.subParser("spanGamut")(l,b,d);l=b.noHeaderId?"":
' id\x3d"'+c(l)+'"';g=f-1+g.length;g="\x3ch"+g+l+"\x3e"+a+"\x3c/h"+g+"\x3e";return e.subParser("hashBlock")(g,b,d)});return a=d.converter._dispatch("headers.after",a,b,d)});e.subParser("horizontalRule",function(a,b,d){a=d.converter._dispatch("horizontalRule.before",a,b,d);var c=e.subParser("hashBlock")("\x3chr /\x3e",b,d);a=a.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,c);a=a.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,c);a=a.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,c);return a=d.converter._dispatch("horizontalRule.after",
a,b,d)});e.subParser("images",function(a,b,d){function c(a,b,c,f,g,l,r,k){r=d.gUrls;var N=d.gTitles,p=d.gDimensions;c=c.toLowerCase();k||(k="");if(""===f||null===f){if(""===c||null===c)c=b.toLowerCase().replace(/ ?\n/g," ");if(e.helper.isUndefined(r[c]))return a;f=r[c];e.helper.isUndefined(N[c])||(k=N[c]);e.helper.isUndefined(p[c])||(g=p[c].width,l=p[c].height)}b=b.replace(/"/g,"\x26quot;").replace(e.helper.regexes.asteriskAndDash,e.helper.escapeCharactersCallback);f=f.replace(e.helper.regexes.asteriskAndDash,
e.helper.escapeCharactersCallback);a='\x3cimg src\x3d"'+f+'" alt\x3d"'+b+'"';k&&(k=k.replace(/"/g,"\x26quot;").replace(e.helper.regexes.asteriskAndDash,e.helper.escapeCharactersCallback),a+=' title\x3d"'+k+'"');g&&l&&(a=a+(' width\x3d"'+("*"===g?"auto":g)+'"')+(' height\x3d"'+("*"===l?"auto":l)+'"'));return a+" /\x3e"}a=d.converter._dispatch("images.before",a,b,d);a=a.replace(/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g,c);a=a.replace(/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,
c);return a=d.converter._dispatch("images.after",a,b,d)});e.subParser("italicsAndBold",function(a,b,d){a=d.converter._dispatch("italicsAndBold.before",a,b,d);b.literalMidWordUnderscores?(a=a.replace(/\b___(\S[\s\S]*)___\b/g,"\x3cstrong\x3e\x3cem\x3e$1\x3c/em\x3e\x3c/strong\x3e"),a=a.replace(/\b__(\S[\s\S]*)__\b/g,"\x3cstrong\x3e$1\x3c/strong\x3e"),a=a.replace(/\b_(\S[\s\S]*?)_\b/g,"\x3cem\x3e$1\x3c/em\x3e")):(a=a.replace(/___(\S[\s\S]*?)___/g,function(a,b){return/\S$/.test(b)?"\x3cstrong\x3e\x3cem\x3e"+
b+"\x3c/em\x3e\x3c/strong\x3e":a}),a=a.replace(/__(\S[\s\S]*?)__/g,function(a,b){return/\S$/.test(b)?"\x3cstrong\x3e"+b+"\x3c/strong\x3e":a}),a=a.replace(/_([^\s_][\s\S]*?)_/g,function(a,b){return/\S$/.test(b)?"\x3cem\x3e"+b+"\x3c/em\x3e":a}));a=a.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(a,b){return/\S$/.test(b)?"\x3cstrong\x3e\x3cem\x3e"+b+"\x3c/em\x3e\x3c/strong\x3e":a});a=a.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(a,b){return/\S$/.test(b)?"\x3cstrong\x3e"+b+"\x3c/strong\x3e":a});a=a.replace(/\*([^\s*][\s\S]*?)\*/g,
function(a,b){return/\S$/.test(b)?"\x3cem\x3e"+b+"\x3c/em\x3e":a});return a=d.converter._dispatch("italicsAndBold.after",a,b,d)});e.subParser("lists",function(a,b,d){function c(a,c){d.gListLevel++;a=a.replace(/\n{2,}$/,"\n");a+="\u00a80";var f=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(\u00a80| {0,3}([*+-]|\d+[.])[ \t]+))/gm,g=/\n[ \t]*\n(?!\u00a80)/.test(a);b.disableForced4SpacesIndentedSublists&&(f=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(\u00a80|\2([*+-]|\d+[.])[ \t]+))/gm);
a=a.replace(f,function(a,c,f,l,k,r,p){p=p&&""!==p.trim();a=e.subParser("outdent")(k,b,d);f="";r&&b.tasklists&&(f=' class\x3d"task-list-item" style\x3d"list-style-type: none;"',a=a.replace(/^[ \t]*\[(x|X| )?]/m,function(){var a='\x3cinput type\x3d"checkbox" disabled style\x3d"margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';p&&(a+=" checked");return a+"\x3e"}));a=a.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(a){return"\u00a8A"+a});c||-1<a.search(/\n{2,}/)?(a=e.subParser("githubCodeBlocks")(a,
b,d),a=e.subParser("blockGamut")(a,b,d)):(a=e.subParser("lists")(a,b,d),a=a.replace(/\n$/,""),a=e.subParser("hashHTMLBlocks")(a,b,d),a=a.replace(/\n\n+/g,"\n\n"),a=a.replace(/\n\n/g,"\u00a8B"),a=g?e.subParser("paragraphs")(a,b,d):e.subParser("spanGamut")(a,b,d),a=a.replace(/\u00a8B/g,"\n\n"));a=a.replace("\u00a8A","");return"\x3cli"+f+"\x3e"+a+"\x3c/li\x3e\n"});a=a.replace(/\u00a80/g,"");d.gListLevel--;c&&(a=a.replace(/\s+$/,""));return a}function f(a,d,e){var f=b.disableForced4SpacesIndentedSublists?
/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,g=b.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===d?f:g,k="";-1!==a.search(l)?function ba(a){var b=a.search(l);-1!==b?(k+="\n\x3c"+d+"\x3e\n"+c(a.slice(0,b),!!e)+"\x3c/"+d+"\x3e\n",d="ul"===d?"ol":"ul",l="ul"===d?f:g,ba(a.slice(b))):k+="\n\x3c"+d+"\x3e\n"+c(a,!!e)+"\x3c/"+d+"\x3e\n"}(a):k="\n\x3c"+d+"\x3e\n"+c(a,!!e)+"\x3c/"+d+"\x3e\n";return k}a=d.converter._dispatch("lists.before",a,b,d);a+="\u00a80";a=d.gListLevel?
a.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(\u00a80|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(a,b,d){a=-1<d.search(/[*+-]/g)?"ul":"ol";return f(b,a,!0)}):a.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(\u00a80|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(a,b,d,c){a=-1<c.search(/[*+-]/g)?"ul":"ol";return f(d,a,!1)});a=a.replace(/\u00a80/,"");return a=d.converter._dispatch("lists.after",a,b,d)});e.subParser("outdent",function(a,b,d){a=d.converter._dispatch("outdent.before",
a,b,d);a=a.replace(/^(\t|[ ]{1,4})/gm,"\u00a80");a=a.replace(/\u00a80/g,"");return a=d.converter._dispatch("outdent.after",a,b,d)});e.subParser("paragraphs",function(a,b,d){a=d.converter._dispatch("paragraphs.before",a,b,d);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");var c=a.split(/\n{2,}/g);a=[];for(var f=c.length,g=0;g<f;g++){var l=c[g];0<=l.search(/\u00a8(K|G)(\d+)\1/g)?a.push(l):0<=l.search(/\S/)&&(l=e.subParser("spanGamut")(l,b,d),l=l.replace(/^([ \t]*)/g,"\x3cp\x3e"),l+="\x3c/p\x3e",a.push(l))}f=
a.length;for(g=0;g<f;g++){for(var k,c=a[g],l=!1;/\u00a8(K|G)(\d+)\1/.test(c);)k=RegExp.$2,k="K"===RegExp.$1?d.gHtmlBlocks[k]:l?e.subParser("encodeCode")(d.ghCodeBlocks[k].text,b,d):d.ghCodeBlocks[k].codeblock,k=k.replace(/\$/g,"$$$$"),c=c.replace(/(\n\n)?\u00a8(K|G)\d+\2(\n\n)?/,k),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(c)&&(l=!0);a[g]=c}a=a.join("\n");a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");return d.converter._dispatch("paragraphs.after",a,b,d)});e.subParser("runExtension",function(a,b,c,e){a.filter?
b=a.filter(b,e.converter,c):a.regex&&(c=a.regex,c instanceof RegExp||(c=new RegExp(c,"g")),b=b.replace(c,a.replace));return b});e.subParser("spanGamut",function(a,b,c){a=c.converter._dispatch("spanGamut.before",a,b,c);a=e.subParser("codeSpans")(a,b,c);a=e.subParser("escapeSpecialCharsWithinTagAttributes")(a,b,c);a=e.subParser("encodeBackslashEscapes")(a,b,c);a=e.subParser("images")(a,b,c);a=e.subParser("anchors")(a,b,c);a=e.subParser("autoLinks")(a,b,c);a=e.subParser("italicsAndBold")(a,b,c);a=e.subParser("strikethrough")(a,
b,c);a=e.subParser("hashHTMLSpans")(a,b,c);a=e.subParser("encodeAmpsAndAngles")(a,b,c);a=b.simpleLineBreaks?a.replace(/\n/g,"\x3cbr /\x3e\n"):a.replace(/  +\n/g,"\x3cbr /\x3e\n");return a=c.converter._dispatch("spanGamut.after",a,b,c)});e.subParser("strikethrough",function(a,b,c){b.strikethrough&&(a=c.converter._dispatch("strikethrough.before",a,b,c),a=a.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,"\x3cdel\x3e$1\x3c/del\x3e"),a=c.converter._dispatch("strikethrough.after",a,b,c));return a});e.subParser("stripLinkDefinitions",
function(a,b,c){a=(a+"\u00a80").replace(/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=\u00a80))/gm,function(a,d,f,g,l,k,p){d=d.toLowerCase();c.gUrls[d]=e.subParser("encodeAmpsAndAngles")(f,b,c);if(k)return k+p;p&&(c.gTitles[d]=p.replace(/"|'/g,"\x26quot;"));b.parseImgDimensions&&g&&l&&(c.gDimensions[d]={width:g,height:l});return""});return a=a.replace(/\u00a80/,"")});e.subParser("tables",function(a,
b,c){function d(a){return/^:[ \t]*--*$/.test(a)?' style\x3d"text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(a)?' style\x3d"text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(a)?' style\x3d"text-align:center;"':""}function f(a,d){var f="";a=a.trim();b.tableHeaderId&&(f=' id\x3d"'+a.replace(/ /g,"_").toLowerCase()+'"');a=e.subParser("spanGamut")(a,b,c);return"\x3cth"+f+d+"\x3e"+a+"\x3c/th\x3e\n"}function g(a,d){a=e.subParser("spanGamut")(a,b,c);return"\x3ctd"+d+"\x3e"+a+"\x3c/td\x3e\n"}function l(a,b){for(var c=
"\x3ctable\x3e\n\x3cthead\x3e\n\x3ctr\x3e\n",d=a.length,e=0;e<d;++e)c+=a[e];c+="\x3c/tr\x3e\n\x3c/thead\x3e\n\x3ctbody\x3e\n";for(e=0;e<b.length;++e){c+="\x3ctr\x3e\n";for(a=0;a<d;++a)c+=b[e][a];c+="\x3c/tr\x3e\n"}return c+"\x3c/tbody\x3e\n\x3c/table\x3e\n"}if(!b.tables)return a;a=c.converter._dispatch("tables.before",a,b,c);a=a.replace(/^ {0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){2,}[\s\S]+?(?:\n\n|\u00a80)/gm,function(a){var b,c=a.split("\n");for(b=
0;b<c.length;++b)/^ {0,3}\|/.test(c[b])&&(c[b]=c[b].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(c[b])&&(c[b]=c[b].replace(/\|[ \t]*$/,""));var k=c[0].split("|").map(function(a){return a.trim()}),p=c[1].split("|").map(function(a){return a.trim()}),N=[],h=[],m=[],r=[];c.shift();c.shift();for(b=0;b<c.length;++b)""!==c[b].trim()&&N.push(c[b].split("|").map(function(a){return a.trim()}));if(k.length<p.length)return a;for(b=0;b<p.length;++b)m.push(d(p[b]));for(b=0;b<k.length;++b)e.helper.isUndefined(m[b])&&
(m[b]=""),h.push(f(k[b],m[b]));for(b=0;b<N.length;++b){a=[];for(c=0;c<h.length;++c)e.helper.isUndefined(N[b][c]),a.push(g(N[b][c],m[c]));r.push(a)}return l(h,r)});return a=c.converter._dispatch("tables.after",a,b,c)});e.subParser("unescapeSpecialChars",function(a,b,c){a=c.converter._dispatch("unescapeSpecialChars.before",a,b,c);a=a.replace(/\u00a8E(\d+)E/g,function(a,b){a=parseInt(b);return String.fromCharCode(a)});return a=c.converter._dispatch("unescapeSpecialChars.after",a,b,c)});b.exports?b.exports=
e:this.showdown=e}).call(zb)}),Za=f(function(b){(function(c){b.exports=c("undefined"===typeof window?null:window)})(function k(b){var e=function(a){return k(a)};e.version="0.8.9";e.removed=[];if(!b||!b.document||9!==b.document.nodeType)return e.isSupported=!1,e;var f=b.document,h=f,m=b.DocumentFragment,g=b.Node,l=b.NodeFilter,p=b.NamedNodeMap||b.MozNamedAttrMap,a=b.Text,r=b.Comment,d=b.DOMParser,n=!1;if("function"===typeof b.HTMLTemplateElement){var q=f.createElement("template");q.content&&q.content.ownerDocument&&
(f=q.content.ownerDocument)}var y=f.implementation,t=f.createNodeIterator,u=f.getElementsByTagName,v=f.createDocumentFragment,A=h.importNode,I={};e.isSupported="undefined"!==typeof y.createHTMLDocument&&9!==f.documentMode;var B=function(a,b){for(var d=b.length;d--;)"string"===typeof b[d]&&(b[d]=b[d].toLowerCase()),a[b[d]]=!0;return a},N=function(a){var b={},d;for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b},ba=null,Ba=B({},"a abbr acronym address area article aside audio b bdi bdo big blink blockquote body br button canvas caption center cite code col colgroup content data datalist dd decorator del details dfn dir div dl dt element em fieldset figcaption figure font footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i img input ins kbd label legend li main map mark marquee menu menuitem meter nav nobr ol optgroup option output p pre progress q rp rt ruby s samp section select shadow small source spacer span strike strong style sub summary sup table tbody td template textarea tfoot th thead time tr track tt u ul var video wbr svg altglyph altglyphdef altglyphitem animatecolor animatemotion animatetransform circle clippath defs desc ellipse filter font g glyph glyphref hkern image line lineargradient marker mask metadata mpath path pattern polygon polyline radialgradient rect stop switch symbol text textpath title tref tspan view vkern feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feMerge feMergeNode feMorphology feOffset feSpecularLighting feTile feTurbulence math menclose merror mfenced mfrac mglyph mi mlabeledtr mmuliscripts mn mo mover mpadded mphantom mroot mrow ms mpspace msqrt mystyle msub msup msubsup mtable mtd mtext mtr munder munderover #text".split(" ")),
xa=null,H=B({},"accept action align alt autocomplete background bgcolor border cellpadding cellspacing checked cite class clear color cols colspan coords datetime default dir disabled download enctype face for headers height hidden high href hreflang id ismap label lang list loop low max maxlength media method min multiple name noshade novalidate nowrap open optimum pattern placeholder poster preload pubdate radiogroup readonly rel required rev reversed role rows rowspan spellcheck scope selected shape size span srclang start src step style summary tabindex title type usemap valign value width xmlns accent-height accumulate additivive alignment-baseline ascent attributename attributetype azimuth basefrequency baseline-shift begin bias by clip clip-path clip-rule color color-interpolation color-interpolation-filters color-profile color-rendering cx cy d dx dy diffuseconstant direction display divisor dur edgemode elevation end fill fill-opacity fill-rule filter flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight fx fy g1 g2 glyph-name glyphref gradientunits gradienttransform image-rendering in in2 k k1 k2 k3 k4 kerning keypoints keysplines keytimes lengthadjust letter-spacing kernelmatrix kernelunitlength lighting-color local marker-end marker-mid marker-start markerheight markerunits markerwidth maskcontentunits maskunits max mask mode min numoctaves offset operator opacity order orient orientation origin overflow paint-order path pathlength patterncontentunits patterntransform patternunits points preservealpha r rx ry radius refx refy repeatcount repeatdur restart result rotate scale seed shape-rendering specularconstant specularexponent spreadmethod stddeviation stitchtiles stop-color stop-opacity stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke stroke-width surfacescale targetx targety transform text-anchor text-decoration text-rendering textlength u1 u2 unicode values viewbox visibility vert-adv-y vert-origin-x vert-origin-y word-spacing wrap writing-mode xchannelselector ychannelselector x x1 x2 y y1 y2 z zoomandpan accent accentunder bevelled close columnsalign columnlines columnspan denomalign depth display displaystyle fence frame largeop length linethickness lspace lquote mathbackground mathcolor mathsize mathvariant maxsize minsize movablelimits notation numalign open rowalign rowlines rowspacing rowspan rspace rquote scriptlevel scriptminsize scriptsizemultiplier selection separator separators stretchy subscriptshift supscriptshift symmetric voffset xlink:href xml:id xlink:title xml:space xmlns:xlink".split(" ")),
K=null,G=null,L=!0,P=!0,T=!1,w=!1,Q=!1,W=/\{\{[\s\S]*|[\s\S]*\}\}/gm,Y=/<%[\s\S]*|[\s\S]*%>/gm,X=!1,aa=!1,Z=!1,ca=!1,na=!1,ea=!0,da=!0,ka=B({},"audio head math script style template svg video".split(" ")),oa=B({},["audio","video","img","source","image"]),ia=B({},"alt class for id label name pattern placeholder summary title value style xmlns".split(" ")),pa=null,ma=f.createElement("form"),fa=function(a){e.removed.push({element:a});try{a.parentNode.removeChild(a)}catch(ta){a.outerHTML=""}},ga=function(a,
b){e.removed.push({attribute:b.getAttributeNode(a),from:b});b.removeAttribute(a)},ha=function(a){aa&&(a="\x3cremove\x3e\x3c/remove\x3e"+a);if(n)try{var b=(new d).parseFromString(a,"text/html")}catch(S){}if(!b||!b.documentElement){b=y.createHTMLDocument("");var e=b.body;e.parentNode.removeChild(e.parentNode.firstElementChild);e.outerHTML=a}return u.call(b,X?"html":"body")[0]};e.isSupported&&ha('\x3csvg\x3e\x3cp\x3e\x3cstyle\x3e\x3cimg src\x3d"\x3c/style\x3e\x3cimg src\x3dx onerror\x3dalert(1)//"\x3e').querySelector("svg img")&&
(n=!0);var V=function(a){return t.call(a.ownerDocument||a,a,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,function(){return l.FILTER_ACCEPT},!1)},la=function(a){return"object"===typeof g?a instanceof g:a&&"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName},qa=function(b){R("beforeSanitizeElements",b,null);var d=b instanceof a||b instanceof r?!1:"string"===typeof b.nodeName&&"string"===typeof b.textContent&&"function"===typeof b.removeChild&&b.attributes instanceof p&&"function"===
typeof b.removeAttribute&&"function"===typeof b.setAttribute?!1:!0;if(d)return fa(b),!0;d=b.nodeName.toLowerCase();R("uponSanitizeElement",b,{tagName:d,allowedTags:ba});if(!ba[d]||K[d]){if(da&&!ka[d]&&"function"===typeof b.insertAdjacentHTML)try{b.insertAdjacentHTML("AfterEnd",b.innerHTML)}catch(Ya){}fa(b);return!0}!w||b.firstElementChild||b.content&&b.content.firstElementChild||!/</g.test(b.textContent)||(e.removed.push({element:b.cloneNode()}),b.innerHTML=b.textContent.replace(/</g,"\x26lt;"));
Q&&3===b.nodeType&&(d=b.textContent,d=d.replace(W," "),d=d.replace(Y," "),b.textContent!==d&&(e.removed.push({element:b.cloneNode()}),b.textContent=d));R("afterSanitizeElements",b,null);return!1},Ca=/^data-[\-\w.\u00B7-\uFFFF]/,Da=/^aria-[\-\w]+$/,za=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Fa=/^(?:\w+script|data):/i,Aa=/[\x00-\x20\xA0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ra=function(a){var d,g;R("beforeSanitizeAttributes",a,null);if(d=a.attributes){var l={attrName:"",
attrValue:"",keepAttr:!0,allowedAttributes:xa};for(g=d.length;g--;){var k=d[g];var N=k.name;k=k.value.trim();var p=N.toLowerCase();l.attrName=p;l.attrValue=k;l.keepAttr=!0;R("uponSanitizeAttribute",a,l);k=l.attrValue;if("name"===p&&"IMG"===a.nodeName&&d.id){var h=d.id;d=Array.prototype.slice.apply(d);ga("id",a);ga(N,a);d.indexOf(h)>g&&a.setAttribute("id",h.value)}else if("INPUT"!==a.nodeName||"type"!==p||"file"!==k||!xa[p]&&G[p])"id"===N&&a.setAttribute(N,""),ga(N,a);else continue;if(l.keepAttr&&
(!ea||"id"!==p&&"name"!==p||!(k in b||k in f||k in ma))){Q&&(k=k.replace(W," "),k=k.replace(Y," "));if(!P||!Ca.test(p))if(!L||!Da.test(p))if(!xa[p]||G[p])continue;else if(!(ia[p]||za.test(k.replace(Aa,""))||("src"===p||"xlink:href"===p)&&0===k.indexOf("data:")&&oa[a.nodeName.toLowerCase()]||T&&!Fa.test(k.replace(Aa,"")))&&k)continue;try{a.setAttribute(N,k),e.removed.pop()}catch(Hb){}}}R("afterSanitizeAttributes",a,null)}},sa=function(a){var b,d=V(a);for(R("beforeSanitizeShadowDOM",a,null);b=d.nextNode();)R("uponSanitizeShadowNode",
b,null),qa(b)||(b.content instanceof m&&sa(b.content),ra(b));R("afterSanitizeShadowDOM",a,null)},R=function(a,b,d){I[a]&&I[a].forEach(function(a){a.call(e,b,d,pa)})};e.sanitize=function(a,d){var f;a||(a="\x3c!--\x3e");if("string"!==typeof a&&!la(a)){if("function"!==typeof a.toString)throw new TypeError("toString is not a function");a=a.toString()}if(!e.isSupported){if("object"===typeof b.toStaticHTML||"function"===typeof b.toStaticHTML){if("string"===typeof a)return b.toStaticHTML(a);if(la(a))return b.toStaticHTML(a.outerHTML)}return a}"object"!==
typeof d&&(d={});ba="ALLOWED_TAGS"in d?B({},d.ALLOWED_TAGS):Ba;xa="ALLOWED_ATTR"in d?B({},d.ALLOWED_ATTR):H;K="FORBID_TAGS"in d?B({},d.FORBID_TAGS):{};G="FORBID_ATTR"in d?B({},d.FORBID_ATTR):{};L=!1!==d.ALLOW_ARIA_ATTR;P=!1!==d.ALLOW_DATA_ATTR;T=d.ALLOW_UNKNOWN_PROTOCOLS||!1;w=d.SAFE_FOR_JQUERY||!1;Q=d.SAFE_FOR_TEMPLATES||!1;X=d.WHOLE_DOCUMENT||!1;Z=d.RETURN_DOM||!1;ca=d.RETURN_DOM_FRAGMENT||!1;na=d.RETURN_DOM_IMPORT||!1;aa=d.FORCE_BODY||!1;ea=!1!==d.SANITIZE_DOM;da=!1!==d.KEEP_CONTENT;Q&&(P=!1);
ca&&(Z=!0);d.ADD_TAGS&&(ba===Ba&&(ba=N(ba)),B(ba,d.ADD_TAGS));d.ADD_ATTR&&(xa===H&&(xa=N(xa)),B(xa,d.ADD_ATTR));d.ADD_URI_SAFE_ATTR&&B(ia,d.ADD_URI_SAFE_ATTR);da&&(ba["#text"]=!0);Object&&"freeze"in Object&&Object.freeze(d);pa=d;e.removed=[];if(a instanceof g)d=ha("\x3c!--\x3e"),a=d.ownerDocument.importNode(a,!0),1===a.nodeType&&"BODY"===a.nodeName?d=a:d.appendChild(a);else{if(!Z&&!X&&-1===a.indexOf("\x3c"))return a;d=ha(a);if(!d)return Z?null:""}aa&&fa(d.firstChild);for(f=V(d);a=f.nextNode();)if((3!==
a.nodeType||a!==l)&&!qa(a)){a.content instanceof m&&sa(a.content);ra(a);var l=a}if(Z){if(ca)for(l=v.call(d.ownerDocument);d.firstChild;)l.appendChild(d.firstChild);else l=d;na&&(l=A.call(h,l,!0));return l}return X?d.outerHTML:d.innerHTML};e.addHook=function(a,b){"function"===typeof b&&(I[a]=I[a]||[],I[a].push(b))};e.removeHook=function(a){I[a]&&I[a].pop()};e.removeHooks=function(a){I[a]&&(I[a]=[])};e.removeAllHooks=function(){I={}};return e})}),Ab=function(b){var c=0;b+="x";for(var f=0;f<b.length;f++)2147483647<
c&&(c=parseInt(c/137)),c=131*c+b.charCodeAt(f);return c},Bb=function(b){var c="#";b.forEach(function(b){16>b&&(c+=0);c+=b.toString(16)});return c},Cb=function(b,c,f){b/=360;var k=.5>f?f*(1+c):f+c-f*c,e=2*f-k;return[b+1/3,b,b-1/3].map(function(b){0>b&&b++;1<b&&b--;b=b<1/6?e+6*(k-e)*b:.5>b?k:b<2/3?e+6*(k-e)*(2/3-b):e;return Math.round(255*b)})},Ta=function(b){b=b||{};var c=[b.lightness,b.saturation].map(function(b){b=b||[.35,.5,.65];return"[object Array]"===Object.prototype.toString.call(b)?b.concat():
[b]});this.L=c[0];this.S=c[1];this.hash=b.hash||Ab};Ta.prototype.hsl=function(b){var c=this.hash(b);b=c%359;c=parseInt(c/360);var f=this.S[c%this.S.length];c=parseInt(c/this.S.length);return[b,f,this.L[c%this.L.length]]};Ta.prototype.rgb=function(b){b=this.hsl(b);return Cb.apply(this,b)};Ta.prototype.hex=function(b){b=this.rgb(b);return Bb(b)};var v=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010",
"\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F",,,'\\"'];v[92]="\\\\";v[173]="\\u00ad";v[1536]="\\u0600";v[1537]="\\u0601";v[1538]="\\u0602";v[1539]="\\u0603";v[1757]="\\u06dd";v[1807]="\\u070f";v[6068]="\\u17b4";v[6069]="\\u17b5";v[8203]="\\u200b";v[8204]="\\u200c";v[8205]="\\u200d";v[8206]="\\u200e";v[8207]="\\u200f";v[8232]="\\u2028";v[8233]="\\u2029";v[8234]="\\u202a";v[8235]="\\u202b";v[8236]=
"\\u202c";v[8237]="\\u202d";v[8238]="\\u202e";v[8288]="\\u2060";v[8289]="\\u2061";v[8290]="\\u2062";v[8291]="\\u2063";v[8292]="\\u2064";v[8298]="\\u206a";v[8299]="\\u206b";v[8300]="\\u206c";v[8301]="\\u206d";v[8302]="\\u206e";v[8303]="\\u206f";v[65279]="\\ufeff";v[65529]="\\ufff9";v[65530]="\\ufffa";v[65531]="\\ufffb";var fb=/[\x00-\x1f\xad\u0600-\u0603\u06dd\u070f\u17b4\u17b5\u200b-\u200f\u2028-\u202e\u2060-\u2064\u206a-\u206f\ufeff\ufff9-\ufffb"\\]/g,Db=new Ta,Ua=new Y.Converter;Ua.setFlavor("github");
var W=window.comments_config||B({},window),Ka=function(b){if("number"!==typeof b||1>b){b=window.location.hostname+window.location.pathname;for(var c=5381,f=b.length;f;)c=33*c^b.charCodeAt(--f);b=c>>>0}return b}(W.post_id),ub=A(W.ui_flags,0,15,0),vb=(Y=!!W.ws_enabled)?W.ws_host||h(W.rpc_host):"",Eb=Y?A(W.ws_reconnect_secs,1,3600,10):0,$a=W.auth_host,Q=!!$a,ka=A(W.auth_flags,1,255,7),Fb=A(W.limit_depth,0,127,7),gb=A(W.collapse_depth,-1,127,-1),Va=A(W.content_limit,0,8192,0),H={raw_items:[],items:[],
root$:null,reply$:null,refresh$:null},Gb=window.location.href,ab,bb,ia;(window.addEventListener||window.attachEvent)(window.addEventListener?"message":"onmessage",function(b){b=JSON.parse(b.data);if(Array.isArray(b)&&3===b.length&&b[2]===bb){var c=b[1];b[0]&&c&&c.es_token?H.root$.auth$$S(c):H.root$.auth$$F(c||"Auth failed.")}},!1);(function(b){function c(a){"string"!==typeof a&&(a=String(a));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}
function f(a){"string"!==typeof a&&(a=String(a));return a}function h(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};x.iterable&&(b[Symbol.iterator]=function(){return b});return b}function e(a){this.map={};a instanceof e?a.forEach(function(a,b){this.append(b,a)},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function m(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function n(a){return new Promise(function(b,
c){a.onload=function(){b(a.result)};a.onerror=function(){c(a.error)}})}function q(a){var b=new FileReader,c=n(b);b.readAsArrayBuffer(a);return c}function g(a){a=new Uint8Array(a);for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=String.fromCharCode(a[c]);return b.join("")}function l(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);b.set(new Uint8Array(a));return b.buffer}function p(){this.bodyUsed=!1;this._initBody=function(a){if(this._bodyInit=a)if("string"===typeof a)this._bodyText=
a;else if(x.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(x.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(x.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(x.arrayBuffer&&x.blob&&B(a))this._bodyArrayBuffer=l(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(x.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||G(a)))this._bodyArrayBuffer=l(a);else throw Error("unsupported BodyInit type");
else this._bodyText="";this.headers.get("content-type")||("string"===typeof a?this.headers.set("content-type","text/plain;charset\x3dUTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):x.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset\x3dUTF-8"))};x.blob&&(this.blob=function(){var a=m(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));
if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(q)});this.text=function(){var a=m(this);if(a)return a;if(this._bodyBlob){var a=this._bodyBlob,b=new FileReader,c=n(b);b.readAsText(a);return c}if(this._bodyArrayBuffer)return Promise.resolve(g(this._bodyArrayBuffer));if(this._bodyFormData)throw Error("could not read FormData body as text");
return Promise.resolve(this._bodyText)};x.formData&&(this.formData=function(){return this.text().then(r)});this.json=function(){return this.text().then(JSON.parse)};return this}function a(a,b){b=b||{};var c=b.body;if("string"===typeof a)this.url=a;else{if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url;this.credentials=a.credentials;b.headers||(this.headers=new e(a.headers));this.method=a.method;this.mode=a.mode;c||null==a._bodyInit||(c=a._bodyInit,a.bodyUsed=!0)}this.credentials=b.credentials||
this.credentials||"omit";if(b.headers||!this.headers)this.headers=new e(b.headers);a=b.method||this.method||"GET";var d=a.toUpperCase();this.method=-1<I.indexOf(d)?d:a;this.mode=b.mode||this.mode||null;this.referrer=null;if(("GET"===this.method||"HEAD"===this.method)&&c)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(c)}function r(a){var b=new FormData;a.trim().split("\x26").forEach(function(a){if(a){var c=a.split("\x3d");a=c.shift().replace(/\+/g," ");c=c.join("\x3d").replace(/\+/g,
" ");b.append(decodeURIComponent(a),decodeURIComponent(c))}});return b}function d(a){var b=new e;a.split("\r\n").forEach(function(a){var c=a.split(":");if(a=c.shift().trim())c=c.join(":").trim(),b.append(a,c)});return b}function t(a,b){b||(b={});this.type="default";this.status="status"in b?b.status:200;this.ok=200<=this.status&&300>this.status;this.statusText="statusText"in b?b.statusText:"OK";this.headers=new e(b.headers);this.url=b.url||"";this._initBody(a)}if(!b.fetch){var u="Symbol"in b&&"iterator"in
Symbol,v;if(v="FileReader"in b&&"Blob"in b)try{new Blob,v=!0}catch(N){v=!1}var x={searchParams:"URLSearchParams"in b,iterable:u,blob:v,formData:"FormData"in b,arrayBuffer:"ArrayBuffer"in b};if(x.arrayBuffer){var A="[object Int8Array];[object Uint8Array];[object Uint8ClampedArray];[object Int16Array];[object Uint16Array];[object Int32Array];[object Uint32Array];[object Float32Array];[object Float64Array]".split(";");var B=function(a){return a&&DataView.prototype.isPrototypeOf(a)};var G=ArrayBuffer.isView||
function(a){return a&&-1<A.indexOf(Object.prototype.toString.call(a))}}e.prototype.append=function(a,b){a=c(a);b=f(b);var d=this.map[a];d||(d=[],this.map[a]=d);d.push(b)};e.prototype["delete"]=function(a){delete this.map[c(a)]};e.prototype.get=function(a){return(a=this.map[c(a)])?a[0]:null};e.prototype.getAll=function(a){return this.map[c(a)]||[]};e.prototype.has=function(a){return this.map.hasOwnProperty(c(a))};e.prototype.set=function(a,b){this.map[c(a)]=[f(b)]};e.prototype.forEach=function(a,b){Object.getOwnPropertyNames(this.map).forEach(function(c){this.map[c].forEach(function(d){a.call(b,
d,c,this)},this)},this)};e.prototype.keys=function(){var a=[];this.forEach(function(b,c){a.push(c)});return h(a)};e.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});return h(a)};e.prototype.entries=function(){var a=[];this.forEach(function(b,c){a.push([c,b])});return h(a)};x.iterable&&(e.prototype[Symbol.iterator]=e.prototype.entries);var I="DELETE GET HEAD OPTIONS POST PUT".split(" ");a.prototype.clone=function(){return new a(this,{body:this._bodyInit})};p.call(a.prototype);
p.call(t.prototype);t.prototype.clone=function(){return new t(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new e(this.headers),url:this.url})};t.error=function(){var a=new t(null,{status:0,statusText:""});a.type="error";return a};var H=[301,302,303,307,308];t.redirect=function(a,b){if(-1===H.indexOf(b))throw new RangeError("Invalid status code");return new t(null,{status:b,headers:{location:a}})};b.Headers=e;b.Request=a;b.Response=t;b.fetch=function(b,c){return new Promise(function(e,
f){var g=new a(b,c),l=new XMLHttpRequest;l.onload=function(){var a={status:l.status,statusText:l.statusText,headers:d(l.getAllResponseHeaders()||"")};a.url="responseURL"in l?l.responseURL:a.headers.get("X-Request-URL");e(new t("response"in l?l.response:l.responseText,a))};l.onerror=function(){f(new TypeError("Network request failed"))};l.ontimeout=function(){f(new TypeError("Network request failed"))};l.open(g.method,g.url,!0);"include"===g.credentials&&(l.withCredentials=!0);"responseType"in l&&
x.blob&&(l.responseType="blob");g.headers.forEach(function(a,b){l.setRequestHeader(b,a)});l.send("undefined"===typeof g._bodyInit?null:g._bodyInit)})};b.fetch.polyfill=!0}})("undefined"!==typeof self?self:void 0);var ib=function(){function b(b,f,h,e){this.url=b;this.opts=f;this.ih=h;this.ah=e;this.handlers=[];this.authOk=this.cbFail=null}b.prototype.then=function(b,f){this.cbFail?console.warn("Cannot add a resolve/reject handler once a reject handler is provided."):b?this.handlers.push(b):(this.handlers.push(f),
this.run());return this};b.prototype.catch=function(b){this.cbFail?console.warn("Only one reject handler is allowed."):(this.handlers.push(b),this.run());return this};b.prototype.run=function(b){var c=this.url;b&&(c=c.substring(0,c.lastIndexOf("\x3d")+1)+b);b=fetch(c,this.opts).then(this.ih).then(Xa);for(var c=this.handlers,f=c.length-1,e=0;e<f;)b.then(c[e++]);b.then(void 0,this.cbFail||(this.cbFail=this.fail.bind(this)))};b.prototype.fail=function(b){if(this.ah&&(401===b||Array.isArray(b)&&3===b[0]))this.ah(this.authOk||
(this.authOk=this.run.bind(this)));else this.handlers[this.handlers.length-1](b)};return b}(),Y={auth$$:void 0,get$$:function(b,c){return hb(Z?Z+b:b,c)},post$$:function(b,c,f,h){b=Z?Z+b:b;f=fa.auth$$;c={method:"POST",body:c};return f?new ib(b,c,Na,f):fetch(b,c).then(Na).then(Xa)}};window.rpc_config_d=Y;var fa=window.rpc_config||Y,Z=window.rpc_host||"",la={},Y=Object.freeze({getItem:function(b){return la[b]},setItem:function(b,c){la[b]=c;return!0},removeItem:function(b){return b in la&&delete la[b]},
clear:function(){la={};return!0}}),cb=window.localStorage||Y,Y={get:function(b){return b?this._state[b]:this._state},fire:function(b,c){if(b=b in this._handlers&&this._handlers[b].slice())for(var f=0;f<b.length;f+=1)b[f].call(this,c)},observe:function(b,c,f){var k=f&&f.defer?this._observers.post:this._observers.pre;(k[b]||(k[b]=[])).push(c);f&&!1===f.init||(c.__calling=!0,c.call(this,this._state[b]),c.__calling=!1);return{cancel:function(){var e=k[b].indexOf(c);~e&&k[b].splice(e,1)}}},on:function(b,
c){if("teardown"===b)return this.on("destroy",c);var f=this._handlers[b]||(this._handlers[b]=[]);f.push(c);return{cancel:function(){var b=f.indexOf(c);~b&&f.splice(b,1)}}},set:function(b){this._set(ca({},b));(this._root||this)._flush()},_flush:function(){if(this._renderHooks)for(;this._renderHooks.length;){var b=this._renderHooks.pop();b.fn.call(b.context)}}},P=function(){return{data:function(){return{}},helpers:{timeago:ma,append:T,plus_minus:ea,title:function(b,c){return"direct replies: "+b+", nested replies: "+
(c-b)},reply_btn_class:function(b){return b<Fb?"outlined":"hide"}},oncreate:function(){var b=this.get("item"),c=this.refs.content,f=c.parentNode.firstElementChild,h=b["4"];b.v$=this;f.style.color=Db.hex(h);f.innerHTML=Za.sanitize(Ua.makeHtml(h));c.innerHTML=Za.sanitize(Ua.makeHtml(b["5"]))},methods:{toggle:function(b){b.collapsed=!b.collapsed;this.set({item:b})},show_form:function(){var b=H.root$;b.get("loading")||b.reply$$show_form(this,this.refs.content.nextElementSibling)},refresh:function(){var b=
H.root$;b.get("loading")||b.fetch$$(!1,this)}}}}();ca(aa.prototype,P.methods,Y);aa.prototype._set=function(b){var c=this._state;this._state=ca({},c,b);Pa(this,this._observers.pre,b,c);this._fragment&&this._fragment.update(b,this._state);Pa(this,this._observers.post,b,c);this._flush()};aa.prototype.teardown=aa.prototype.destroy=function(b){this.fire("destroy");this._fragment.destroy(!1!==b);this._fragment=null;this._state={};this._torndown=!0};var ga=function(){function b(b,c,e,a){c.disabled=b;a.disabled=
b;Q||(e.disabled=b)}function c(c,e,f){c.initial?(c.initial=!1,b(!1,e.comment_content,e.comment_name,e.comment_btn),e.controls.setAttribute("class","controls"),vb&&window.setTimeout(c.connect,1E3)):f&&(f.refs.refresh.disabled=!1);return f}function f(b){32===b.which&&b.ctrlKey&&this.preview("comment_preview","comment_content")}function h(b){switch(b.which){case 27:this.reply$$hide_form();break;case 32:b.ctrlKey&&this.preview("reply_preview","reply_content")}}function e(b){13===b.which&&this.reply$$()}
function m(b){13===b.which&&this.comment$$()}function n(b,c){var e=b.auth_data;b=e.info;switch(e.type){case 1:e=b.name;c.user_html=1&ka>>>4?'\x3ca\x3e\x3cimg src\x3d"'+b.picture+'" /\x3e'+e+"\x3c/a\x3e":e;break;case 2:e=ka&8?b.login:b.name;c.user_html=2&ka>>>4?'\x3ca href\x3d"https://github.com/'+b.login+'"\x3e\x3cimg src\x3d"'+b.avatar_url+'" /\x3e'+e+"\x3c/a\x3e":e;break;case 3:e=ka&8?b.username:b.name;c.user_html=4&ka>>>4?'\x3ca href\x3d"https://gitlab.com/'+b.username+'"\x3e\x3cimg src\x3d"'+
b.avatar_url+'" /\x3e'+e+"\x3c/a\x3e":e;break;default:c.user_html=e=e.es_user}return e}function q(b,c,e){return fa.post$$(Q?b+"?access_token\x3d"+e.session.auth_data.es_token:b,c)}return{data:function(){return{loading:!0,errmg:"",items:H.items,total_count:0,comment_content_err:!1,comment_name_err:!1,comment_errmsg:"",comment_preview:"",reply_content_err:!1,reply_name_err:!1,reply_errmsg:"",reply_preview:"",collapsed:!1,skip_refresh:1===(1&ub),skip_load_more:2===(2&ub),with_auth:Q,auth_flags:ka,connected:!1,
user_nick:""}},helpers:{append:T,plus_minus:ea,pluralize:wb},oncreate:function(){H.root$=this;Z=W.rpc_host||"";var c=this.refs,l={auth_data:null,user:null};if(Q)var p=cb.getItem("session"),l=(null==p?null:JSON.parse(p))||l;Object.defineProperty(this,"m",{enumerable:!1,value:{initial:!0,total_count:0,fetch$$S:this.fetch$$S.bind(this),fetch$$F:this.fetch$$F.bind(this),comment$$S:this.comment$$S.bind(this),comment$$F:this.comment$$F.bind(this),reply$$S:this.reply$$S.bind(this),reply$$F:this.reply$$F.bind(this),
reply_form_parent:c.reply_form.parentNode,login$$S:this.login$$S.bind(this),login$$F:this.login$$F.bind(this),user_html:null,session:l,onopen:this.onopen.bind(this),onclose:this.onclose.bind(this),connect:this.connect.bind(this),onmessage:this.onmessage.bind(this),root_map:{},comment_key:"",reply_key:"",ws:null}});c.comment_content.addEventListener("keyup",f.bind(this));c.reply_content.addEventListener("keyup",h.bind(this));Q?l.auth_data&&this.set({user_nick:n(l,this.m)}):(c.reply_name.addEventListener("keyup",
e.bind(this)),c.comment_name.addEventListener("keyup",m.bind(this)));b(!0,c.comment_content,c.comment_name,c.comment_btn);this.fetch$$(!0)},methods:{collapse_all:function(b,c){for(var e=0,a=c.length;e<a;e++)c[e].collapsed=!b;this.set({collapsed:!b,items:c})},fetch$$S:function(b){b=b["1"];var e=c(this.m,this.refs,H.refresh$);if(b&&b.length)if(e)H.refresh$=null,e=e.get("item"),La(b,e.children,this.m,e),this.set({loading:!1,total_count:this.m.total_count});else{b=La(b,this.get("items"),this.m,null);
this.set({loading:!1,total_count:this.m.total_count,items:b});return}else{this.set({loading:!1});if(!e)return;e=e.get("item")}for(b=e.parent;b;b=b.parent)e=b;e.v$.set({item:e})},fetch$$F:function(b){c(this.m,this.refs,H.refresh$);this.set({loading:!1,errmsg:Ja(b)})},fetch$$:function(b,c){var e=this.m;b?b=X():(c?(H.refresh$=c,c.refs.refresh.disabled=!0,b=c.get("item"),b=X(b.children,b)):b=X(this.get("items")),this.set({loading:!0,errmsg:""}));fa.post$$("/comments/user/Comment/listByPostId",b).then(e.fetch$$S).then(void 0,
e.fetch$$F)},load:function(b){if(!this.get("loading")){var c=this.m;this.set({loading:!0,errmsg:""});b=X(b&&this.get("items"));fa.post$$("/comments/user/Comment/listByPostId",b).then(c.fetch$$S).then(void 0,c.fetch$$F)}},comment$$S:function(c){var e=this.m,f=this.refs,a=f.comment_content,g=f.comment_name,d=c["2"];c=La(c["1"],this.get("items"),e,null,!0);a.value="";g.value="";e.comment_key=d&&d["1"];b(!1,a,g,f.comment_btn);this.set({loading:!1,total_count:e.total_count,items:c})},comment$$F:function(c){var e=
this.refs;b(!1,e.comment_content,e.comment_name,e.comment_btn);this.set({loading:!1,comment_errmsg:Ja(c)})},comment$$:function(){var c=this.refs,e=this.m,f=c.comment_content,a=c.comment_name,h=f.value.trim(),d=Q?e.user_html:a.value.trim(),k=!h||!Va||h.length<=Va?"":"The content is too long";!h||k?this.set({comment_content_err:!0,comment_name_err:!1,comment_errmsg:k}):!d||!Q&&64<d.length&&(k="Name cannot be more than 64 characters")?this.set({comment_content_err:!1,comment_name_err:!0,comment_errmsg:k}):
(b(!0,f,a,c.comment_btn),this.set({loading:!0,errmsg:"",comment_content_err:!1,comment_name_err:!1,comment_errmsg:"",comment_preview:""}),q("/comments/user/Comment/create",db(d,h),e).then(e.comment$$S).then(void 0,e.comment$$F))},reply$$hide_form:function(){this.m.reply_form_parent.appendChild(this.refs.reply_form)},reply$$show_form:function(b,c){var e=this.refs,a=e.reply_form;H.reply$=b;c.parentNode.insertBefore(a,c);e.reply_content.focus()},reply$$S:function(c){var e=this.m,f=this.refs,a=f.reply_content,
g=f.reply_name,d=c["1"];c=c["2"];var h=H.reply$.get("item"),k=h.parent;a.value="";g.value="";e.reply_key=c&&c["1"];La(d,h.children,e,h,!0);this.m.reply_form_parent.appendChild(f.reply_form);b(!1,a,g,f.reply_btn);for(this.set({loading:!1,total_count:e.total_count});k;)h=k,k=k.parent;h.v$.set({item:h})},reply$$F:function(c){var e=this.refs;b(!1,e.reply_content,e.reply_name,e.reply_btn);this.set({loading:!1,reply_errmsg:Ja(c)})},reply$$:function(){var c=this.refs,e=this.m,f=c.reply_content,a=c.reply_name,
h=f.value.trim(),d=Q?e.user_html:a.value.trim(),k=!h||!Va||h.length<=Va?"":"The content is too long";!h||k?this.set({reply_content_err:!0,reply_name_err:!1,reply_errmsg:k}):!d||!Q&&64<d.length&&(k="Name cannot be more than 64 characters")?this.set({reply_content_err:!1,reply_name_err:!0,reply_errmsg:k}):(b(!0,f,a,c.reply_btn),this.set({loading:!0,errmsg:"",reply_content_err:!1,reply_name_err:!1,reply_errmsg:"",reply_preview:""}),c=H.reply$.get("item"),q("/comments/user/Comment/create",db(d,h,c),e).then(e.reply$$S).then(void 0,
e.reply$$F))},preview:function(b,c){var e={},a=this.refs,f=!0;if(c=a[c].value.trim())f=c===this.get(b);else if(c===this.get(b))return;f?e[b]="":(e[b]=c,a[b].innerHTML=Za.sanitize(Ua.makeHtml(c)));this.set(e)},pop:function(b){if(!this.get("loading")){this.set({errmsg:""});ab=ab?"":b+".html";for(var c="",e=0;10>e;e++)c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));bb=c;ia||(ia=document.createElement("iframe"),ia.style.width="100%",ia.style.border=
"none",document.body.appendChild(ia));ia.src=$a+"/iframe/"+ab+"#"+bb+"~"+b+"~"+Gb}},auth$$S:function(b){if(!this.get("loading")){var c=this.m;c.session.auth_data=b;this.set({loading:!0});hb($a+"/auth/user/login?es_token\x3d"+b.es_token).then(c.login$$S).then(void 0,c.login$$F)}},auth$$F:function(b){this.get("loading")||this.set({errmsg:b})},login$$S:function(b){var c=this.m,e=c.session;b=b["2"];if(e.auth_data.es_user===b["3"]){e.user=b;try{cb.setItem("session",JSON.stringify(e))}catch(a){}this.set({loading:!1,
user_nick:n(e,c)})}},login$$F:function(b){this.set({loading:!1,errmsg:Ja(b)})},logout:function(){cb.removeItem("session");this.m.user_html="";this.set({user_nick:""})},onmessage:function(b){if((b=JSON.parse(b.data))&&Ka===b["6"]){var c=this.m,e=b["1"];b=b["3"];if(!b)e!==c.comment_key&&this.fetch$$();else if(e!==c.reply_key){if(12===b.length)var a=c.root_map[b];else for(var c=c.root_map,f=0,d=Math.floor(b.length/12);0<d--&&(e=c[b.substring(f,f+12)]);f+=12)c=e.map,a=e;this.fetch$$(!1,a&&a.v$)}}},onopen:function(){this.set({connected:!0})},
onclose:function(){this.set({connected:!1});window.setTimeout(this.m.connect,1E3*Eb)},connect:function(){var b=this.m,c=new WebSocket(vb);b.ws=c;c.onopen=b.onopen;c.onclose=b.onclose;c.onmessage=b.onmessage}}}}();ca(ha.prototype,ga.methods,Y);ha.prototype._set=function(b){var c=this._state;this._state=ca({},c,b);Pa(this,this._observers.pre,b,c);this._fragment&&this._fragment.update(b,this._state);Pa(this,this._observers.post,b,c);this._flush()};ha.prototype.teardown=ha.prototype.destroy=function(b){this.fire("destroy");
this._fragment.destroy(!1!==b);this._fragment=null;this._state={};this._torndown=!0};window.comments=new ha({target:document.getElementById("comments")})})();
//# sourceMappingURL=build.js.map
