<div class="comment">
  <span class="name">{{ item['4'] }}</span><span class="timeago">{{ timeago(item['2']) }}</span>
  <div ref:content></div>
  <button class="outlined" on:click="reply$$(item)">Reply</button>
  {{#if item.children.length}}
  <dd class='children'>
    {{#each item.children as child, i}}
    <:Self item='{{ child }}' index="{{ i }}"  />
    {{/each}}
  </dd>
  {{/if}}
</div>
<script>
import { POST_ID, context, timeago, append, extractMsg, toHTML } from './util'
import * as rpc from './rpc'

export default {
    data: () => ({

    }),
    helpers: {
        timeago
    },
    oncreate() {
        Object.defineProperty(this, 'm', {
            enumerable: false,
            value: {
                reply$$S: this.reply$$S.bind(this),
                reply$$F: this.reply$$F.bind(this)
            }
        })

        this.refs.content.innerHTML = toHTML(this.get('item')['5'])
    },
    methods: {
        reply$$S(data) {

        },
        reply$$F(err) {

        },
        reply$$(item) {
            console.log('TODO: reply to ' + item['1'])
        }
    }
}
</script>